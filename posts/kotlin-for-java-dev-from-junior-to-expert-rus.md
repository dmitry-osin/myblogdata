- [üü¢ –£—Ä–æ–≤–µ–Ω—å 1: –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –§—É–Ω–¥–∞–º–µ–Ω—Ç (–ß–∞—Å—Ç—å 1)](#-—É—Ä–æ–≤–µ–Ω—å-1-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å-–∏-—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç-—á–∞—Å—Ç—å-1)
  - [1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –¢–∏–ø—ã: –°–º–µ–Ω–∞ –ø–∞—Ä–∞–¥–∏–≥–º—ã](#1-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–∏-—Ç–∏–ø—ã-—Å–º–µ–Ω–∞-–ø–∞—Ä–∞–¥–∏–≥–º—ã)
    - [`val` vs `var`](#val-vs-var)
    - [–í—ã–≤–æ–¥ —Ç–∏–ø–æ–≤ (Type Inference)](#–≤—ã–≤–æ–¥-—Ç–∏–ø–æ–≤-type-inference)
    - [–°—Ç—Ä–æ–∫–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã (String Templates)](#—Å—Ç—Ä–æ–∫–æ–≤—ã–µ-—à–∞–±–ª–æ–Ω—ã-string-templates)
    - [–ë–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã: –ì–¥–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã?](#–±–∞–∑–æ–≤—ã–µ-—Ç–∏–ø—ã-–≥–¥–µ-–ø—Ä–∏–º–∏—Ç–∏–≤—ã)
  - [2. Null Safety: –ì–ª–∞–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –≤—ã—Å—Ç—Ä–µ–ª–∞ –≤ –Ω–æ–≥—É](#2-null-safety-–≥–ª–∞–≤–Ω–∞—è-–∑–∞—â–∏—Ç–∞-–æ—Ç-–≤—ã—Å—Ç—Ä–µ–ª–∞-–≤-–Ω–æ–≥—É)
    - [Nullable vs Non-nullable](#nullable-vs-non-nullable)
    - [–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç—ã —Å Null](#–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã-—Ä–∞–±–æ—Ç—ã-—Å-null)
      - [1. Safe Call Operator `?.`](#1-safe-call-operator-)
      - [2. Elvis Operator `?:`](#2-elvis-operator-)
      - [3. Not-null Assertion `!!` (–û–ø–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π —Ä–∏—Å–∫–∞)](#3-not-null-assertion--–æ–ø–µ—Ä–∞—Ç–æ—Ä-–¥–ª—è-–ª—é–±–∏—Ç–µ–ª–µ–π-—Ä–∏—Å–∫–∞)
      - [4. Safe Cast `as?`](#4-safe-cast-as)
    - [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: Java vs Kotlin](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π-–ø—Ä–∏–º–µ—Ä-java-vs-kotlin)
    - [üß† –ß—Ç–æ –Ω—É–∂–Ω–æ —É—Å–≤–æ–∏—Ç—å –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ:](#-—á—Ç–æ-–Ω—É–∂–Ω–æ-—É—Å–≤–æ–∏—Ç—å-–Ω–∞-—ç—Ç–æ–º-—ç—Ç–∞–ø–µ)
- [üü¢ –£—Ä–æ–≤–µ–Ω—å 1: –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –§—É–Ω–¥–∞–º–µ–Ω—Ç (–ß–∞—Å—Ç—å 2)](#-—É—Ä–æ–≤–µ–Ω—å-1-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å-–∏-—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç-—á–∞—Å—Ç—å-2)
  - [3. –ö–ª–∞—Å—Å—ã –∏ –û–±—ä–µ–∫—Ç—ã](#3-–∫–ª–∞—Å—Å—ã-–∏-–æ–±—ä–µ–∫—Ç—ã)
    - [–ö–ª–∞—Å—Å—ã –∏ –°–≤–æ–π—Å—Ç–≤–∞ (Properties)](#–∫–ª–∞—Å—Å—ã-–∏-—Å–≤–æ–π—Å—Ç–≤–∞-properties)
    - [Data Classes (–£–±–∏–π—Ü–∞ Lombok)](#data-classes-—É–±–∏–π—Ü–∞-lombok)
    - [Object –∏ Companion Object (–ì–¥–µ `static`?)](#object-–∏-companion-object-–≥–¥–µ-static)
  - [4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º (Control Flow)](#4-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–ø–æ—Ç–æ–∫–æ–º-control-flow)
    - [`if` –∫–∞–∫ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ](#if-–∫–∞–∫-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ)
    - [`when` (–°—É–ø–µ—Ä-—Å–∏–ª—å–Ω—ã–π Switch)](#when-—Å—É–ø–µ—Ä-—Å–∏–ª—å–Ω—ã–π-switch)
    - [–¶–∏–∫–ª—ã –∏ –î–∏–∞–ø–∞–∑–æ–Ω—ã (Ranges)](#—Ü–∏–∫–ª—ã-–∏-–¥–∏–∞–ø–∞–∑–æ–Ω—ã-ranges)
    - [üí° –í–∞–∂–Ω—ã–µ –º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–¥–≤–∏–≥–∏ –¥–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞](#-–≤–∞–∂–Ω—ã–µ-–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ-—Å–¥–≤–∏–≥–∏-–¥–ª—è-java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)
- [üü° –£—Ä–æ–≤–µ–Ω—å 2: Idiomatic Kotlin (–ß–∞—Å—Ç—å 1)](#-—É—Ä–æ–≤–µ–Ω—å-2-idiomatic-kotlin-—á–∞—Å—Ç—å-1)
  - [1. –§—É–Ω–∫—Ü–∏–∏ 2.0: –ì–∏–±–∫–æ—Å—Ç—å –∏ –ö—Ä–∞—Ç–∫–æ—Å—Ç—å](#1-—Ñ—É–Ω–∫—Ü–∏–∏-20-–≥–∏–±–∫–æ—Å—Ç—å-–∏-–∫—Ä–∞—Ç–∫–æ—Å—Ç—å)
    - [Single-Expression Functions (–§—É–Ω–∫—Ü–∏–∏-–≤—ã—Ä–∞–∂–µ–Ω–∏—è)](#single-expression-functions-—Ñ—É–Ω–∫—Ü–∏–∏-–≤—ã—Ä–∞–∂–µ–Ω–∏—è)
    - [–ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é](#–∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ-–∞—Ä–≥—É–º–µ–Ω—Ç—ã-–∏-–∑–Ω–∞—á–µ–Ω–∏—è-–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)
  - [2. Extension Functions (–§—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)](#2-extension-functions-—Ñ—É–Ω–∫—Ü–∏–∏-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
    - [–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?](#–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç)
    - [‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å (Under the hood)](#Ô∏è-–≤–∞–∂–Ω–æ-–ø–æ–Ω–∏–º–∞—Ç—å-under-the-hood)
  - [3. –õ—è–º–±–¥—ã –∏ High-Order Functions](#3-–ª—è–º–±–¥—ã-–∏-high-order-functions)
    - [–°–∏–Ω—Ç–∞–∫—Å–∏—Å –ª—è–º–±–¥](#—Å–∏–Ω—Ç–∞–∫—Å–∏—Å-–ª—è–º–±–¥)
    - [–ì–ª–∞–≤–Ω—ã–µ —Ñ–∏—à–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞](#–≥–ª–∞–≤–Ω—ã–µ-—Ñ–∏—à–∫–∏-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞)
    - [–ü—Ä–∞–∫—Ç–∏–∫–∞: –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –±–µ–∑ Stream API](#–ø—Ä–∞–∫—Ç–∏–∫–∞-–∫–æ–ª–ª–µ–∫—Ü–∏–∏-–±–µ–∑-stream-api)
    - [üí° –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#-–≤–∞–∂–Ω—ã–µ-–Ω—é–∞–Ω—Å—ã-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
    - [–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ (–º—ã—Å–ª–µ–Ω–Ω–æ–µ)](#–¥–æ–º–∞—à–Ω–µ–µ-–∑–∞–¥–∞–Ω–∏–µ-–º—ã—Å–ª–µ–Ω–Ω–æ–µ)
- [üü° –£—Ä–æ–≤–µ–Ω—å 2: Idiomatic Kotlin (–ß–∞—Å—Ç—å 2)](#-—É—Ä–æ–≤–µ–Ω—å-2-idiomatic-kotlin-—á–∞—Å—Ç—å-2)
  - [Scope Functions: `let`, `run`, `with`, `apply`, `also`](#scope-functions-let-run-with-apply-also)
    - [1. `apply` (–ù–∞—Å—Ç—Ä–æ–π—â–∏–∫)](#1-apply-–Ω–∞—Å—Ç—Ä–æ–π—â–∏–∫)
    - [2. `let` (–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä / Null-check)](#2-let-—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä--null-check)
    - [3. `with` (–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤—ã–∑–æ–≤–æ–≤)](#3-with-–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞-–≤—ã–∑–æ–≤–æ–≤)
    - [4. `run` (–ì–∏–±—Ä–∏–¥ `with` –∏ `let`)](#4-run-–≥–∏–±—Ä–∏–¥-with-–∏-let)
    - [5. `also` (–ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã)](#5-also-–ø–æ–±–æ—á–Ω—ã–µ-—ç—Ñ—Ñ–µ–∫—Ç—ã)
    - [‚ö° –®–ø–∞—Ä–≥–∞–ª–∫–∞: –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å?](#-—à–ø–∞—Ä–≥–∞–ª–∫–∞-–∫–∞–∫-–≤—ã–±—Ä–∞—Ç—å)
    - [–ü—Ä–∏–º–µ—Ä "–ê–¥–∞ –∏–∑ Scope Functions" (–ö–∞–∫ –Ω–µ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å)](#–ø—Ä–∏–º–µ—Ä-–∞–¥–∞-–∏–∑-scope-functions-–∫–∞–∫-–Ω–µ-–Ω–∞–¥–æ-–¥–µ–ª–∞—Ç—å)
- [üî¥ –£—Ä–æ–≤–µ–Ω—å 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ß–∞—Å—Ç—å 1)](#-—É—Ä–æ–≤–µ–Ω—å-3-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-—á–∞—Å—Ç—å-1)
  - [Sealed Classes \& Interfaces: –°—É–ø–µ—Ä-—ç–Ω–∞–º—ã](#sealed-classes--interfaces-—Å—É–ø–µ—Ä-—ç–Ω–∞–º—ã)
    - [–ü—Ä–∏–º–µ—Ä: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–µ—Ç–∏](#–ø—Ä–∏–º–µ—Ä-–∑–∞–≥—Ä—É–∑–∫–∞-–¥–∞–Ω–Ω—ã—Ö-–∏–∑-—Å–µ—Ç–∏)
    - [–ì–ª–∞–≤–Ω–∞—è —Ñ–∏—à–∫–∞: –ò—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–π `when`](#–≥–ª–∞–≤–Ω–∞—è-—Ñ–∏—à–∫–∞-–∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–π-when)
    - [Sealed Interface](#sealed-interface)
    - [–ß–µ–º —ç—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç Abstract Class?](#—á–µ–º-—ç—Ç–æ-–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è-–æ—Ç-abstract-class)
    - [–ì–¥–µ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å? (Real-world cases)](#–≥–¥–µ-—ç—Ç–æ-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-real-world-cases)
    - [üí° –õ–∞–π—Ñ—Ö–∞–∫ –¥–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞](#-–ª–∞–π—Ñ—Ö–∞–∫-–¥–ª—è-java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)
- [üî¥ –£—Ä–æ–≤–µ–Ω—å 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ß–∞—Å—Ç—å 2)](#-—É—Ä–æ–≤–µ–Ω—å-3-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-—á–∞—Å—Ç—å-2)
  - [1. –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Class Delegation)](#1-–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏-class-delegation)
    - [–ó–∞–¥–∞—á–∞: "–°–ø–∏—Å–æ–∫ —Å –ª–æ–≥–≥–µ—Ä–æ–º"](#–∑–∞–¥–∞—á–∞-—Å–ø–∏—Å–æ–∫-—Å-–ª–æ–≥–≥–µ—Ä–æ–º)
  - [2. –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (Property Delegation)](#2-–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ-—Å–≤–æ–π—Å—Ç–≤–∞-property-delegation)
    - [–°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –¥–µ–ª–µ–≥–∞—Ç: `by lazy`](#—Å–∞–º—ã–π-–≤–∞–∂–Ω—ã–π-–¥–µ–ª–µ–≥–∞—Ç-by-lazy)
    - [`by observable` (–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å)](#by-observable-–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å)
    - [`by map` (–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –≤ Map)](#by-map-—Ö—Ä–∞–Ω–µ–Ω–∏–µ-—Å–≤–æ–π—Å—Ç–≤-–≤-map)
  - [3. –ö–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π –¥–µ–ª–µ–≥–∞—Ç? (Under the hood)](#3-–∫–∞–∫-–Ω–∞–ø–∏—Å–∞—Ç—å-—Å–≤–æ–π-–¥–µ–ª–µ–≥–∞—Ç-under-the-hood)
    - [–ì–¥–µ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏?](#–≥–¥–µ-—ç—Ç–æ-–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è-–≤-—Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏)
    - [üí° –†–µ–∑—é–º–µ](#-—Ä–µ–∑—é–º–µ)
- [üî¥ –£—Ä–æ–≤–µ–Ω—å 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ß–∞—Å—Ç—å 3)](#-—É—Ä–æ–≤–µ–Ω—å-3-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∏-–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-—á–∞—Å—Ç—å-3)
  - [1. Reified Type Parameters (–ü–æ–±–µ–¥–∞ –Ω–∞–¥ —Å—Ç–∏—Ä–∞–Ω–∏–µ–º —Ç–∏–ø–æ–≤)](#1-reified-type-parameters-–ø–æ–±–µ–¥–∞-–Ω–∞–¥-—Å—Ç–∏—Ä–∞–Ω–∏–µ–º-—Ç–∏–ø–æ–≤)
    - [–ü—Ä–∏–º–µ—Ä: JSON –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è](#–ø—Ä–∏–º–µ—Ä-json-–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è)
    - [–ü—Ä–∏–º–µ—Ä 2: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ —Ç–∏–ø—É](#–ø—Ä–∏–º–µ—Ä-2-–±–µ–∑–æ–ø–∞—Å–Ω–∞—è-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è-—Å–ø–∏—Å–∫–∞-–ø–æ-—Ç–∏–ø—É)
  - [2. Variance: `in` –∏ `out` (–í–º–µ—Å—Ç–æ `? super` –∏ `? extends`)](#2-variance-in-–∏-out-–≤–º–µ—Å—Ç–æ--super-–∏--extends)
    - [`out` (–ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å) ‚Äî Producer](#out-–∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å--producer)
    - [`in` (–ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å) ‚Äî Consumer](#in-–∫–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å--consumer)
    - [–ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å (MutableList)](#–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å-mutablelist)
  - [3. Star Projection `*` (–ó–≤–µ–∑–¥–Ω–∞—è –ø—Ä–æ–µ–∫—Ü–∏—è)](#3-star-projection--–∑–≤–µ–∑–¥–Ω–∞—è-–ø—Ä–æ–µ–∫—Ü–∏—è)
  - [4. `where` (–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–ø–æ–≤)](#4-where-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è-–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö-—Ç–∏–ø–æ–≤)
    - [üí° –†–µ–∑—é–º–µ –¥–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞](#-—Ä–µ–∑—é–º–µ-–¥–ª—è-java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)
- [üü£ –£—Ä–æ–≤–µ–Ω—å 4: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å (–ß–∞—Å—Ç—å 1)](#-—É—Ä–æ–≤–µ–Ω—å-4-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å-—á–∞—Å—Ç—å-1)
  - [1. –ö–æ—Ä—É—Ç–∏–Ω—ã vs –ü–æ—Ç–æ–∫–∏: –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞?](#1-–∫–æ—Ä—É—Ç–∏–Ω—ã-vs-–ø–æ—Ç–æ–∫–∏-–≤-—á–µ–º-—Ä–∞–∑–Ω–∏—Ü–∞)
    - [–ö–ª—é—á–µ–≤–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è: Suspend (–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞)](#–∫–ª—é—á–µ–≤–∞—è-–∫–æ–Ω—Ü–µ–ø—Ü–∏—è-suspend-–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞)
  - [2. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `suspend`](#2-–∫–ª—é—á–µ–≤–æ–µ-—Å–ª–æ–≤–æ-suspend)
  - [3. –ó–∞–ø—É—Å–∫ –∫–æ—Ä—É—Ç–∏–Ω: Builders](#3-–∑–∞–ø—É—Å–∫-–∫–æ—Ä—É—Ç–∏–Ω-builders)
    - [`runBlocking` (–ú–æ—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏ main)](#runblocking-–º–æ—Å—Ç-–¥–ª—è-—Ç–µ—Å—Ç–æ–≤-–∏-main)
    - [`launch` (Fire and Forget)](#launch-fire-and-forget)
  - [4. Structured Concurrency (–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å)](#4-structured-concurrency-—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è-–∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å)
  - [5. Under the Hood (–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±–∞–π—Ç-–∫–æ–¥–µ?)](#5-under-the-hood-–∫–∞–∫-—ç—Ç–æ-—Ä–∞–±–æ—Ç–∞–µ—Ç-–≤-–±–∞–π—Ç-–∫–æ–¥–µ)
    - [üí° –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–∏–ª—ã (100k Coroutines)](#-–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è-—Å–∏–ª—ã-100k-coroutines)
- [üü£ –£—Ä–æ–≤–µ–Ω—å 4: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å (–ß–∞—Å—Ç—å 2)](#-—É—Ä–æ–≤–µ–Ω—å-4-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å-—á–∞—Å—Ç—å-2)
  - [1. Dispatchers: –ù–∞ –∫–∞–∫–æ–º –ø–æ—Ç–æ–∫–µ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º?](#1-dispatchers-–Ω–∞-–∫–∞–∫–æ–º-–ø–æ—Ç–æ–∫–µ-–º—ã-—Ä–∞–±–æ—Ç–∞–µ–º)
    - [–û—Å–Ω–æ–≤–Ω—ã–µ –≤–∏–¥—ã –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–≤:](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤–∏–¥—ã-–¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–≤)
  - [2. `withContext`: –≠–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ](#2-withcontext-—ç–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ-–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ)
  - [3. `async` \& `await`: –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º](#3-async--await-–ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º)
    - [–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ vs –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ](#–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ-vs-–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)
    - [‚ö†Ô∏è –ß–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞ –Ω–æ–≤–∏—á–∫–æ–≤](#Ô∏è-—á–∞—Å—Ç–∞—è-–æ—à–∏–±–∫–∞-–Ω–æ–≤–∏—á–∫–æ–≤)
  - [4. CoroutineContext: –ú–∞–≥–∏—è –ø–ª—é—Å–∞ `+`](#4-coroutinecontext-–º–∞–≥–∏—è-–ø–ª—é—Å–∞-)
  - [üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç: ViewModelScope (Android)](#-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π-—Å–æ–≤–µ—Ç-viewmodelscope-android)
- [üü£ –£—Ä–æ–≤–µ–Ω—å 4: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å (–ß–∞—Å—Ç—å 3) ‚Äî Kotlin Flow](#-—É—Ä–æ–≤–µ–Ω—å-4-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å-—á–∞—Å—Ç—å-3--kotlin-flow)
  - [1. –ß—Ç–æ —Ç–∞–∫–æ–µ Flow? (Cold Streams)](#1-—á—Ç–æ-—Ç–∞–∫–æ–µ-flow-cold-streams)
    - [–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä:](#–ø—Ä–æ—Å—Ç–æ–π-–ø—Ä–∏–º–µ—Ä)
  - [2. –û–ø–µ—Ä–∞—Ç–æ—Ä—ã (–ö–∞–∫ Collections, —Ç–æ–ª—å–∫–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)](#2-–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã-–∫–∞–∫-collections-—Ç–æ–ª—å–∫–æ-–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
    - [`flowOn` (–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)](#flowon-–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
  - [3. Hot Streams: `StateFlow` –∏ `SharedFlow`](#3-hot-streams-stateflow-–∏-sharedflow)
    - [`StateFlow` (–ê–Ω–∞–ª–æ–≥ LiveData / BehaviorSubject)](#stateflow-–∞–Ω–∞–ª–æ–≥-livedata--behaviorsubject)
    - [`SharedFlow` (–ê–Ω–∞–ª–æ–≥ PublishSubject)](#sharedflow-–∞–Ω–∞–ª–æ–≥-publishsubject)
  - [4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#4-–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
  - [üí° RxJava vs Kotlin Flow](#-rxjava-vs-kotlin-flow)
- [‚ö´ –£—Ä–æ–≤–µ–Ω—å 5: Expert (–ß–∞—Å—Ç—å 1) ‚Äî Reflection \& Interop](#-—É—Ä–æ–≤–µ–Ω—å-5-expert-—á–∞—Å—Ç—å-1--reflection--interop)
  - [1. Reflection API: `KClass` vs `Class`](#1-reflection-api-kclass-vs-class)
    - [KClass vs Java Class](#kclass-vs-java-class)
    - [–ü—Ä–∞–∫—Ç–∏–∫–∞: –î–æ—Å—Ç—É–ø –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º —á–µ—Ä–µ–∑ —Ä–µ—Ñ–ª–µ–∫—Å–∏—é](#–ø—Ä–∞–∫—Ç–∏–∫–∞-–¥–æ—Å—Ç—É–ø-–∫-—Å–≤–æ–π—Å—Ç–≤–∞–º-—á–µ—Ä–µ–∑-—Ä–µ—Ñ–ª–µ–∫—Å–∏—é)
  - [2. Java Interop: –î–µ–ª–∞–µ–º –∫–æ–¥ –∫—Ä–∞—Å–∏–≤—ã–º –¥–ª—è Java](#2-java-interop-–¥–µ–ª–∞–µ–º-–∫–æ–¥-–∫—Ä–∞—Å–∏–≤—ã–º-–¥–ª—è-java)
    - [`@JvmStatic`: –ù–∞—Å—Ç–æ—è—â–∞—è —Å—Ç–∞—Ç–∏–∫–∞](#jvmstatic-–Ω–∞—Å—Ç–æ—è—â–∞—è-—Å—Ç–∞—Ç–∏–∫–∞)
    - [`@JvmOverloads`: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –∏ –º–µ—Ç–æ–¥—ã](#jvmoverloads-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã-–∏-–º–µ—Ç–æ–¥—ã)
    - [`@JvmField`: –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è](#jvmfield-–æ—Ç–∫—Ä—ã—Ç—ã–µ-–ø–æ–ª—è)
    - [`@Throws`: –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è](#throws-–ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ-–∏—Å–∫–ª—é—á–µ–Ω–∏—è)
  - [3. –ü—Ä–æ–±–ª–µ–º–∞ `final` (Spring \& Hibernate)](#3-–ø—Ä–æ–±–ª–µ–º–∞-final-spring--hibernate)
    - [üí° –†–µ–∑—é–º–µ –ß–∞—Å—Ç–∏ 1](#-—Ä–µ–∑—é–º–µ-—á–∞—Å—Ç–∏-1)
- [‚ö´ –£—Ä–æ–≤–µ–Ω—å 5: Expert (–ß–∞—Å—Ç—å 2) ‚Äî Performance \& Bytecode](#-—É—Ä–æ–≤–µ–Ω—å-5-expert-—á–∞—Å—Ç—å-2--performance--bytecode)
  - [1. `inline` —Ñ—É–Ω–∫—Ü–∏–∏: –£–±–∏–π—Ü–∞ –æ–≤–µ—Ä—Ö–µ–¥–∞](#1-inline-—Ñ—É–Ω–∫—Ü–∏–∏-—É–±–∏–π—Ü–∞-–æ–≤–µ—Ä—Ö–µ–¥–∞)
    - [–ü—Ä–∏–º–µ—Ä: –°–≤–æ–π "synchronized"](#–ø—Ä–∏–º–µ—Ä-—Å–≤–æ–π-synchronized)
    - [–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `inline`?](#–∫–æ–≥–¥–∞-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å-inline)
    - [–¢–æ–Ω–∫–æ—Å—Ç–∏: `noinline` –∏ `crossinline`](#—Ç–æ–Ω–∫–æ—Å—Ç–∏-noinline-–∏-crossinline)
  - [2. Value Classes (ex. Inline Classes)](#2-value-classes-ex-inline-classes)
  - [3. –•–≤–æ—Å—Ç–æ–≤–∞—è —Ä–µ–∫—É—Ä—Å–∏—è (`tailrec`)](#3-—Ö–≤–æ—Å—Ç–æ–≤–∞—è-—Ä–µ–∫—É—Ä—Å–∏—è-tailrec)
  - [4. Primitive Arrays (–ì–¥–µ —Ç–µ—Ä—è–µ—Ç—Å—è –ø–∞–º—è—Ç—å)](#4-primitive-arrays-–≥–¥–µ-—Ç–µ—Ä—è–µ—Ç—Å—è-–ø–∞–º—è—Ç—å)
  - [üí° –†–µ–∑—é–º–µ –ß–∞—Å—Ç–∏ 2](#-—Ä–µ–∑—é–º–µ-—á–∞—Å—Ç–∏-2)
- [‚ö´ –£—Ä–æ–≤–µ–Ω—å 5: Expert (–ß–∞—Å—Ç—å 3) ‚Äî –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#-—É—Ä–æ–≤–µ–Ω—å-5-expert-—á–∞—Å—Ç—å-3--–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
  - [1. –ñ–∏–∑–Ω—å –±–µ–∑ Checked Exceptions](#1-–∂–∏–∑–Ω—å-–±–µ–∑-checked-exceptions)
  - [2. –¢–∏–ø `Result<T>`](#2-—Ç–∏–ø-resultt)
    - [–ü—Ä–∏–º–µ—Ä: –ü–∞—Ä—Å–∏–Ω–≥ –∏ –°–µ—Ç—å](#–ø—Ä–∏–º–µ—Ä-–ø–∞—Ä—Å–∏–Ω–≥-–∏-—Å–µ—Ç—å)
    - [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Result`](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-result)
  - [3. `runCatching`: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞](#3-runcatching-—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è-–æ–±–µ—Ä—Ç–∫–∞)
  - [4. `runCatching` –≤–Ω—É—Ç—Ä–∏ –ö–æ—Ä—É—Ç–∏–Ω](#4-runcatching-–≤–Ω—É—Ç—Ä–∏-–∫–æ—Ä—É—Ç–∏–Ω)
  - [5. –î–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö –≥—É—Ä—É: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Arrow](#5-–¥–ª—è-–Ω–∞—Å—Ç–æ—è—â–∏—Ö-–≥—É—Ä—É-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞-arrow)
  - [üí° –†–µ–∑—é–º–µ –£—Ä–æ–≤–Ω—è 5](#-—Ä–µ–∑—é–º–µ-—É—Ä–æ–≤–Ω—è-5)
- [üõ†Ô∏è –£—Ä–æ–≤–µ–Ω—å 6: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ú–∞–≥–∏—è (DSL)](#Ô∏è-—É—Ä–æ–≤–µ–Ω—å-6-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è-–º–∞–≥–∏—è-dsl)
  - [1. –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç: Lambda with Receiver](#1-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç-lambda-with-receiver)
  - [2. –ü—Ä–æ–µ–∫—Ç: –ü–∏—à–µ–º —Å–≤–æ–π HTML Builder](#2-–ø—Ä–æ–µ–∫—Ç-–ø–∏—à–µ–º-—Å–≤–æ–π-html-builder)
    - [–®–∞–≥ 1: –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å](#—à–∞–≥-1-–±–∞–∑–æ–≤—ã–π-–∫–ª–∞—Å—Å)
    - [–®–∞–≥ 2: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–µ–≥–∏](#—à–∞–≥-2-–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ-—Ç–µ–≥–∏)
    - [–®–∞–≥ 3: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞](#—à–∞–≥-3-—Ç–æ—á–∫–∞-–≤—Ö–æ–¥–∞)
  - [3. –ü—Ä–æ–µ–∫—Ç: SQL Builder (Fluent Interface)](#3-–ø—Ä–æ–µ–∫—Ç-sql-builder-fluent-interface)
    - [–†–µ–∞–ª–∏–∑–∞—Ü–∏—è](#—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
  - [4. –ü—Ä–æ–µ–∫—Ç: JSON DSL –∏ Sealed Classes](#4-–ø—Ä–æ–µ–∫—Ç-json-dsl-–∏-sealed-classes)
    - [–†–µ–∞–ª–∏–∑–∞—Ü–∏—è](#—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è-1)
- [üí° –†–µ–∑—é–º–µ —É—Ä–æ–≤–Ω—è 6](#-—Ä–µ–∑—é–º–µ-—É—Ä–æ–≤–Ω—è-6)
- [üß™ –£—Ä–æ–≤–µ–Ω—å 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ-–ö–æ—Ç–ª–∏–Ω–æ–≤—Å–∫–∏ (Mockk \& Coroutines)](#-—É—Ä–æ–≤–µ–Ω—å-7-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–ø–æ-–∫–æ—Ç–ª–∏–Ω–æ–≤—Å–∫–∏-mockk--coroutines)
  - [1. –ò–º–µ–Ω–∞ –º–µ—Ç–æ–¥–æ–≤ –≤ –æ–±—Ä–∞—Ç–Ω—ã—Ö –∫–∞–≤—ã—á–∫–∞—Ö](#1-–∏–º–µ–Ω–∞-–º–µ—Ç–æ–¥–æ–≤-–≤-–æ–±—Ä–∞—Ç–Ω—ã—Ö-–∫–∞–≤—ã—á–∫–∞—Ö)
  - [2. Mockito vs Mockk](#2-mockito-vs-mockk)
    - [–û—Å–Ω–æ–≤—ã Mockk DSL](#–æ—Å–Ω–æ–≤—ã-mockk-dsl)
    - [–ú–æ–∫–∏–Ω–≥ `object` –∏ Static (–ú–∞–≥–∏—è)](#–º–æ–∫–∏–Ω–≥-object-–∏-static-–º–∞–≥–∏—è)
  - [3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ö–æ—Ä—É—Ç–∏–Ω (`runTest`)](#3-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–∫–æ—Ä—É—Ç–∏–Ω-runtest)
    - [`runTest` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º](#runtest--—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–≤—Ä–µ–º–µ–Ω–µ–º)
    - [–ü–æ–¥–º–µ–Ω–∞ Dispatchers (Injecting Dispatchers)](#–ø–æ–¥–º–µ–Ω–∞-dispatchers-injecting-dispatchers)
  - [4. Data Driven Testing (–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã)](#4-data-driven-testing-–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ-—Ç–µ—Å—Ç—ã)
  - [5. Kotest (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è)](#5-kotest-–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è-–≤—Å–µ–ª–µ–Ω–Ω–∞—è)
    - [üí° –†–µ–∑—é–º–µ –£—Ä–æ–≤–Ω—è 7](#-—Ä–µ–∑—é–º–µ-—É—Ä–æ–≤–Ω—è-7)


---

# üü¢ –£—Ä–æ–≤–µ–Ω—å 1: –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –§—É–Ω–¥–∞–º–µ–Ω—Ç (–ß–∞—Å—Ç—å 1)

## 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –¢–∏–ø—ã: –°–º–µ–Ω–∞ –ø–∞—Ä–∞–¥–∏–≥–º—ã

–í Java –º—ã –ø—Ä–∏–≤—ã–∫–ª–∏ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–ø—ã —è–≤–Ω–æ (`String name = ...`). –í Kotlin –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≥–æ—Ä–∞–∑–¥–æ —É–º–Ω–µ–µ. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, Kotlin –ø–æ–¥—Ç–∞–ª–∫–∏–≤–∞–µ—Ç –Ω–∞—Å –∫ **–Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ—Å—Ç–∏ (immutability)**.

### `val` vs `var`

–í Kotlin –¥–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤–∞ –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

* **`val`** (–æ—Ç *value*): –ù–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞. –ê–Ω–∞–ª–æ–≥ `final` –≤ Java. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.**
* **`var`** (–æ—Ç *variable*): –ò–∑–º–µ–Ω—è–µ–º–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

### –í—ã–≤–æ–¥ —Ç–∏–ø–æ–≤ (Type Inference)

–ï—Å–ª–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –º–æ–∂–µ—Ç –ø–æ–Ω—è—Ç—å —Ç–∏–ø –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–∏–∑ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è), –ø–∏—Å–∞—Ç—å –µ–≥–æ —è–≤–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ.

**–ö–æ–¥ (–°—Ä–∞–≤–Ω–µ–Ω–∏–µ):**

```kotlin
fun main() {
    // --- Java style (–Ω–æ –≤ Kotlin) ---
    // –¢–∏–ø —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ. –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏–∑–±—ã—Ç–æ—á–Ω—ã–º.
    val explicitlyTypedName: String = "Java Developer"

    // --- Kotlin style (Idiomatic) ---
    // –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤–∏–¥–∏—Ç —Å—Ç—Ä–æ–∫—É —Å–ø—Ä–∞–≤–∞ -> –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç —Ç–∏–ø String –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π name.
    val name = "Kotlin Learner" 
    
    // name = "New Name" // –û–®–ò–ë–ö–ê –ö–û–ú–ü–ò–õ–Ø–¶–ò–ò! val –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏—Ç—å.

    var age = 25 // –¢–∏–ø Int –≤—ã–≤–µ–¥–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    age = 26     // var –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å
    
    // age = "Twenty six" // –û–®–ò–ë–ö–ê! –¢–∏–ø –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ Int –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏.
    // Kotlin ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —è–∑—ã–∫.
}

```

### –°—Ç—Ä–æ–∫–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã (String Templates)

–ó–∞–±—É–¥—å—Ç–µ –ø—Ä–æ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é —á–µ—Ä–µ–∑ `+` –∏–ª–∏ `String.format()`.

```kotlin
val firstName = "Ivan"
val lastName = "Petrov"
val hours = 5

// $variable –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –≤—Å—Ç–∞–≤–∫–∏
println("User: $firstName $lastName") 

// ${expression} –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏–ª–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏
println("Name length: ${firstName.length + lastName.length}") 
println("Is working hard? ${if (hours > 8) "Yes" else "No"}")

```

### –ë–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã: –ì–¥–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã?

–í Java –µ—Å—Ç—å –∂–µ—Å—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ: `int` (–ø—Ä–∏–º–∏—Ç–∏–≤) –∏ `Integer` (–æ–±—ä–µ–∫—Ç-–æ–±–µ—Ä—Ç–∫–∞). –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –±–æ–ª—å —Å –∞–≤—Ç–æ–±–æ–∫—Å–∏–Ω–≥–æ–º –∏ –¥–∂–µ–Ω–µ—Ä–∏–∫–∞–º–∏ (`List<Integer>`, –Ω–æ –º–∞—Å—Å–∏–≤ `int[]`).

–í Kotlin **–≤ –∫–æ–¥–µ** –Ω–µ—Ç –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤. –í—Å—ë –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –æ–±—ä–µ–∫—Ç: `Int`, `Double`, `Boolean`, `Char`.

* –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ —É —á–∏—Å–ª–∞: `10.toString()`.
* **–ù–æ!** –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä Kotlin —É–º–Ω—ã–π. –ù–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –≤ –±–∞–π—Ç-–∫–æ–¥ –æ–Ω –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç `Int` –≤ –ø—Ä–∏–º–∏—Ç–∏–≤ `int` –≤–µ–∑–¥–µ, –≥–¥–µ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ, –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í –æ–±—ä–µ–∫—Ç `Integer` –æ–Ω –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã –∫–ª–∞–¥–µ—Ç–µ –µ–≥–æ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é (`List<Int>`) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Nullable —Ç–∏–ø (`Int?`).

---

## 2. Null Safety: –ì–ª–∞–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –≤—ã—Å—Ç—Ä–µ–ª–∞ –≤ –Ω–æ–≥—É

–í Java `NullPointerException` (NPE) ‚Äî —Å–∞–º–∞—è —á–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞. Kotlin —Ä–µ—à–∞–µ—Ç –µ—ë –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤. **–≠—Ç–æ —Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è.**

### Nullable vs Non-nullable

–¢–∏–ø—ã –≤ Kotlin –¥–µ–ª—è—Ç—Å—è –Ω–∞ –¥–≤–∞ –ª–∞–≥–µ—Ä—è:

1. **Non-nullable** (`String`, `User`, `Int`): –í —Ç–∞–∫—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é **–Ω–µ–ª—å–∑—è** –ø–æ–ª–æ–∂–∏—Ç—å `null`. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–æ—Å—Ç–æ –Ω–µ –¥–∞—Å—Ç —Å–æ–±—Ä–∞—Ç—å –∫–æ–¥.
2. **Nullable** (`String?`, `User?`, `Int?`): –¢–∏–ø —Å –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –∑–Ω–∞–∫–æ–º. –°—é–¥–∞ –º–æ–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å `null`.

```kotlin
fun main() {
    // 1. Non-nullable (–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é)
    var text: String = "Hello"
    // text = null // –û–®–ò–ë–ö–ê –ö–û–ú–ü–ò–õ–Ø–¶–ò–ò. 
    // –í—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–Ω–∞–µ—Ç–µ: –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∏–ø–∞ String, —Ç–∞–º –µ—Å—Ç—å —Å—Ç—Ä–æ–∫–∞.
    println(text.length) // –ë–µ–∑–æ–ø–∞—Å–Ω–æ, –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ null –Ω–µ –Ω—É–∂–Ω–∞.

    // 2. Nullable (–ù—É–∂–Ω–æ —è–≤–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å ?)
    var nullableText: String? = "Hello"
    nullableText = null // –¢–µ–ø–µ—Ä—å —ç—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ

    // println(nullableText.length) // –û–®–ò–ë–ö–ê –ö–û–ú–ü–ò–õ–Ø–¶–ò–ò!
    // Kotlin –∑–∞–ø—Ä–µ—â–∞–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –º–µ—Ç–æ–¥–∞–º nullable –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞–ø—Ä—è–º—É—é,
    // —Ç–∞–∫ –∫–∞–∫ —Ç–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å null.
}

```

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç—ã —Å Null

–ö–∞–∫ –∂–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å `String?`? –ù–µ –ø–∏—Å–∞—Ç—å –∂–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ `if (text != null)`?

#### 1. Safe Call Operator `?.`

"–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–µ null, –≤—ã–ø–æ–ª–Ω–∏ –¥–µ–π—Å—Ç–≤–∏–µ/–≤–µ—Ä–Ω–∏ —Å–≤–æ–π—Å—Ç–≤–æ. –ï—Å–ª–∏ null ‚Äî –≤–µ—Ä–Ω–∏ null".

```kotlin
val input: String? = null

// Java –ø–æ–¥—Ö–æ–¥:
// int length = (input != null) ? input.length() : null;

// Kotlin –ø–æ–¥—Ö–æ–¥:
val length: Int? = input?.length 

println(length) // –í—ã–≤–µ–¥–µ—Ç "null", –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ù–ï —É–ø–∞–¥–µ—Ç.

```

#### 2. Elvis Operator `?:`

"–ï—Å–ª–∏ —Å–ª–µ–≤–∞ null, –≤–æ–∑—å–º–∏ —Ç–æ, —á—Ç–æ —Å–ø—Ä–∞–≤–∞". –ê–Ω–∞–ª–æ–≥ `Optional.orElse()`.

```kotlin
val input: String? = null

// –õ–æ–≥–∏–∫–∞: –ü–æ–ø—Ä–æ–±—É–π –ø–æ–ª—É—á–∏—Ç—å –¥–ª–∏–Ω—É. –ï—Å–ª–∏ input == null, —Ç–æ –≤–µ—Ä–Ω–∏ 0.
val length: Int = input?.length ?: 0 

// –ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è early return (–≤—ã—Ö–æ–¥–∞ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏)
fun processUser(name: String?) {
    // –ï—Å–ª–∏ name == null, —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è
    val validName = name ?: return 
    println("Processing $validName")
}

```

#### 3. Not-null Assertion `!!` (–û–ø–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π —Ä–∏—Å–∫–∞)

"–Ø –º–∞–º–æ–π –∫–ª—è–Ω—É—Å—å, –∑–¥–µ—Å—å –Ω–µ—Ç null. –ü—Ä–µ–≤—Ä–∞—Ç–∏ `String?` –≤ `String` –∏–ª–∏ –≤—ã–±—Ä–æ—Å—å NPE".

```kotlin
val input: String? = "Data"
val forcedData: String = input!! // –ï—Å–ª–∏ input –æ–∫–∞–∂–µ—Ç—Å—è null, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø–∞–¥–µ—Ç —Å NPE.

// –°–û–í–ï–¢: –ò–∑–±–µ–≥–∞–π—Ç–µ !! –≤ –ø—Ä–æ–¥–∞–∫—à–Ω –∫–æ–¥–µ. 
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã 100% —É–≤–µ—Ä–µ–Ω—ã (–Ω–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ?:)

```

#### 4. Safe Cast `as?`

–í Java –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ `(String) obj` –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `ClassCastException`, –µ—Å–ª–∏ —Ç–∏–ø –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç.
–í Kotlin `as?` –≤–µ—Ä–Ω–µ—Ç `null`, –µ—Å–ª–∏ –∫–∞—Å—Ç –Ω–µ —É–¥–∞–ª—Å—è.

```kotlin
val obj: Any = 123
val str: String? = obj as? String // str –±—É–¥–µ—Ç null, —Ç–∞–∫ –∫–∞–∫ 123 ‚Äî —ç—Ç–æ Int, –∞ –Ω–µ String.
// –û—à–∏–±–∫–∏ –Ω–µ –±—É–¥–µ—Ç.

```

---

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä: Java vs Kotlin

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É: –£ –Ω–∞—Å –µ—Å—Ç—å `User`, —É –Ω–µ–≥–æ –µ—Å—Ç—å `Address`, —É –∞–¥—Ä–µ—Å–∞ –µ—Å—Ç—å `City`. –í—Å–µ –ø–æ–ª—è –º–æ–≥—É—Ç –±—ã—Ç—å null. –ù–∞–º –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ "Unknown".

**Java (Old school):**

```java
String cityName = "Unknown";
if (user != null) {
    if (user.getAddress() != null) {
        if (user.getAddress().getCity() != null) {
            cityName = user.getAddress().getCity();
        }
    }
}

```

**Kotlin (Idiomatic):**

```kotlin
// –í –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É, —á–∏—Ç–∞–µ—Ç—Å—è —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ:
val cityName = user?.address?.city ?: "Unknown"

```

---

### üß† –ß—Ç–æ –Ω—É–∂–Ω–æ —É—Å–≤–æ–∏—Ç—å –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ:

1. –ü–∏—à–∏—Ç–µ `val` –≤—Å–µ–≥–¥–∞, –ø–æ–∫–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç `var`.
2. –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è *–º–æ–∂–µ—Ç* –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ "–æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è", —Å—Ç–∞–≤—å—Ç–µ `?` –∫ —Ç–∏–ø—É (`String?`).
3. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É "Only safe calls are allowed...", –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `?.` –∏–ª–∏ `?:`.
4. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `!!` –ø—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã "–∑–∞—Ç–∫–Ω—É—Ç—å" –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä.

---

# üü¢ –£—Ä–æ–≤–µ–Ω—å 1: –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –§—É–Ω–¥–∞–º–µ–Ω—Ç (–ß–∞—Å—Ç—å 2)

## 3. –ö–ª–∞—Å—Å—ã –∏ –û–±—ä–µ–∫—Ç—ã

–í Java —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (`Person`) —Ç—Ä–µ–±—É–µ—Ç: –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ø–æ–ª–µ–π, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, –≥–µ—Ç—Ç–µ—Ä–æ–≤, —Å–µ—Ç—Ç–µ—Ä–æ–≤, `equals`, `hashCode` –∏ `toString`. –≠—Ç–æ –æ–∫–æ–ª–æ 50 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞.
–í Kotlin —ç—Ç–æ —á–∞—Å—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç **–æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É**.

### –ö–ª–∞—Å—Å—ã –∏ –°–≤–æ–π—Å—Ç–≤–∞ (Properties)

–í Kotlin –Ω–µ—Ç "–ø–æ–ª–µ–π" (fields) –≤ –ø–æ–Ω–∏–º–∞–Ω–∏–∏ Java (–º—ã –∏—Ö –ø–æ—á—Ç–∏ –Ω–µ –≤–∏–¥–∏–º). –ï—Å—Ç—å **–°–≤–æ–π—Å—Ç–≤–∞ (Properties)**.

* `val` —Å–≤–æ–π—Å—Ç–≤–æ = –ø–æ–ª–µ + –≥–µ—Ç—Ç–µ—Ä.
* `var` —Å–≤–æ–π—Å—Ç–≤–æ = –ø–æ–ª–µ + –≥–µ—Ç—Ç–µ—Ä + —Å–µ—Ç—Ç–µ—Ä.

**Primary Constructor (–ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä)**
–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è –ø—Ä—è–º–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∫–ª–∞—Å—Å–∞.

```kotlin
// class - –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ
// User - –∏–º—è –∫–ª–∞—Å—Å–∞
// (val name: String, var age: Int) - –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
class User(val name: String, var age: Int) 

fun main() {
    // New –Ω–µ –Ω—É–∂–Ω–æ! –ü—Ä–æ—Å—Ç–æ –≤—ã–∑–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–∏
    val user = User("Alex", 25) 

    // –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º (–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≥–µ—Ç—Ç–µ—Ä—ã/—Å–µ—Ç—Ç–µ—Ä—ã)
    println(user.name) // user.getName()
    user.age = 26      // user.setAge(26)
    // user.name = "Bob" // –û—à–∏–±–∫–∞! name –æ–±—ä—è–≤–ª–µ–Ω–æ –∫–∞–∫ val (immutable)
}

```

**–ë–ª–æ–∫ `init` –∏ –∫–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞**
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–ª–æ–∫ `init`.

```kotlin
class User(val name: String, var age: Int) {
    // init –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞
    init {
        if (age < 0) println("Error: Age cannot be negative")
    }
}

```

### Data Classes (–£–±–∏–π—Ü–∞ Lombok)

–î–ª—è –∫–ª–∞—Å—Å–æ–≤, —á—å—è —Ü–µ–ª—å –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (DTO, POJO), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `data class`.

–î–æ–±–∞–≤–∏–≤ –æ–¥–Ω–æ —Å–ª–æ–≤–æ `data`, –≤—ã –±–µ—Å–ø–ª–∞—Ç–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç–µ:

1. `toString()` ‚Äî –∫—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥: `User(name=Alex, age=25)`.
2. `equals()` –∏ `hashCode()` ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ –ø–æ–ª—è–º.
3. `copy()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–ø–∏–∏ –æ–±—ä–µ–∫—Ç–∞ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º —á–∞—Å—Ç–∏ –ø–æ–ª–µ–π.
4. `componentN()` ‚Äî –¥–ª—è –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏.

```kotlin
data class Book(val title: String, val price: Int)

fun main() {
    val b1 = Book("Kotlin in Action", 100)
    val b2 = Book("Kotlin in Action", 100)
    
    // –í Java —ç—Ç–æ –±—ã–ª–æ –±—ã false (—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫). 
    // –í Kotlin data class —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É.
    println(b1 == b2) // true 

    // –ú–µ—Ç–æ–¥ copy() - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è immutability
    // –ú—ã –Ω–µ –º–µ–Ω—è–µ–º b1, –º—ã —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∫–Ω–∏–≥—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ä–æ–π
    val b3 = b1.copy(price = 120) 
    println(b3) // Book(title=Kotlin in Action, price=120)
}

```

### Object –∏ Companion Object (–ì–¥–µ `static`?)

–í Kotlin **–Ω–µ—Ç –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `static**`.

**1. `object` (–°–∏–Ω–≥–ª—Ç–æ–Ω –∏–∑ –∫–æ—Ä–æ–±–∫–∏)**
–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–µ–Ω –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ.

```kotlin
object DatabaseConfig {
    val url = "jdbc:mysql://localhost:3306"
    fun connect() { /*...*/ }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
DatabaseConfig.connect()

```

**2. `companion object` (–ó–∞–º–µ–Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –º–µ—Ç–æ–¥–∞–º)**
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –º–µ—Ç–æ–¥ –±—ã–ª –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∫–ª–∞—Å—Å—É, –∞ –Ω–µ –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Factory` –º–µ—Ç–æ–¥), –ø–æ–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ –≤ `companion object`.

```kotlin
class User private constructor(val name: String) {
    
    // –í—Å–µ, —á—Ç–æ –≤–Ω—É—Ç—Ä–∏, –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ static –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞
    companion object {
        fun createDefault(): User {
            return User("Guest")
        }
    }
}

// –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ:
val user = User.createDefault()

```

---

## 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–º (Control Flow)

### `if` –∫–∞–∫ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ

–í Kotlin `if` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ. –≠—Ç–æ —É–±–∏–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ —Ç–µ—Ä–Ω–∞—Ä–Ω–æ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–µ (`condition ? true : false`). –í Kotlin —Ç–µ—Ä–Ω–∞—Ä–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ **–Ω–µ—Ç**.

```kotlin
val a = 10
val b = 20

// Java: int max = (a > b) ? a : b;
// Kotlin:
val max = if (a > b) a else b

// –ú–æ–∂–Ω–æ –¥–∞–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–ª–æ–∫–∏ –∫–æ–¥–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞)
val maxWithLog = if (a > b) {
    println("A is greater")
    a
} else {
    println("B is greater")
    b
}

```

### `when` (–°—É–ø–µ—Ä-—Å–∏–ª—å–Ω—ã–π Switch)

`when` –∑–∞–º–µ–Ω—è–µ—Ç `switch-case`, –Ω–æ –æ–Ω –Ω–∞–º–Ω–æ–≥–æ –º–æ—â–Ω–µ–µ. –û–Ω —É–º–µ–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–∏–ø—ã, –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è. `break` –ø–∏—Å–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ.

```kotlin
fun describe(obj: Any): String = when (obj) {
    1          -> "One"             // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ
    "Hello"    -> "Greeting"        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç—Ä–æ–∫—É
    is Long    -> "Long Number"     // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ (instanceof)
    !is String -> "Not a string"    // –û—Ç—Ä–∏—Ü–∞–Ω–∏–µ —Ç–∏–ø–∞
    in 10..20  -> "Between 10-20"   // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω
    else       -> "Unknown"         // –ê–Ω–∞–ª–æ–≥ default
}

```

### –¶–∏–∫–ª—ã –∏ –î–∏–∞–ø–∞–∑–æ–Ω—ã (Ranges)

–û–±—ã—á–Ω—ã–π `for (int i=0; i<10; i++)` –≤ Kotlin —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º (—Ö–æ—Ç—è –≤–æ–∑–º–æ–∂–Ω—ã–º —á–µ—Ä–µ–∑ `while`). –ò–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã.

```kotlin
fun main() {
    // 1..5 –≤–∫–ª—é—á–∞–µ—Ç 5 (1, 2, 3, 4, 5)
    for (i in 1..5) { 
        print(i) 
    }

    // until –∏—Å–∫–ª—é—á–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –≥—Ä–∞–Ω–∏—Ü—É (1, 2, 3, 4) - —É–¥–æ–±–Ω–æ –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤
    for (i in 0 until 5) { 
        print(i) 
    }

    // –®–∞–≥ –∏ –æ–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫
    for (i in 10 downTo 1 step 2) {
        print("$i ") // 10, 8, 6, 4, 2
    }
    
    // –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –º–∞–ø–µ
    val map = mapOf("key1" to 1, "key2" to 2)
    for ((key, value) in map) {
        println("$key -> $value")
    }
}

```

---

### üí° –í–∞–∂–Ω—ã–µ –º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–¥–≤–∏–≥–∏ –¥–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

1. **–ü–æ–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –ö–æ–≥–¥–∞ –≤—ã –ø–∏—à–µ—Ç–µ `val name: String`, –ø–æ–ª–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è `private`, –∞ –≥–µ—Ç—Ç–µ—Ä `public`. –í–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –≥–µ—Ç—Ç–µ—Ä—ã —Ä—É–∫–∞–º–∏.
2. **`new` —É–º–µ—Ä:** –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.
3. **`extends` –∏ `implements` –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `:**`: `class Manager : Employee(), InterfaceName`.
4. **–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** –í Java –æ–¥–∏–Ω –∫–ª–∞—Å—Å = –æ–¥–∏–Ω —Ñ–∞–π–ª. –í Kotlin –º–æ–∂–Ω–æ (–∏ –Ω—É–∂–Ω–æ) –∫–ª–∞—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞–ª–µ–Ω—å–∫–∏—Ö –∫–ª–∞—Å—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Data classes) –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª, –µ—Å–ª–∏ –æ–Ω–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏ —Å–≤—è–∑–∞–Ω—ã.

---

# üü° –£—Ä–æ–≤–µ–Ω—å 2: Idiomatic Kotlin (–ß–∞—Å—Ç—å 1)

## 1. –§—É–Ω–∫—Ü–∏–∏ 2.0: –ì–∏–±–∫–æ—Å—Ç—å –∏ –ö—Ä–∞—Ç–∫–æ—Å—Ç—å

–í Java –º–µ—Ç–æ–¥—ã —á–∞—Å—Ç–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω—ã (overloaded). –í—ã —Å–æ–∑–¥–∞–µ—Ç–µ `print()`, `print(String)`, `print(String, Int)` –∏ —Ç.–¥. –í Kotlin —ç—Ç–æ —Ä–µ—à–∞–µ—Ç—Å—è —ç–ª–µ–≥–∞–Ω—Ç–Ω–µ–µ.

### Single-Expression Functions (–§—É–Ω–∫—Ü–∏–∏-–≤—ã—Ä–∞–∂–µ–Ω–∏—è)

–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ `{}` –∏ `return` –º–æ–∂–Ω–æ –≤—ã–±—Ä–æ—Å–∏—Ç—å.

```kotlin
// Java style (–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –±–ª–æ–∫)
fun sum(a: Int, b: Int): Int {
    return a + b
}

// Kotlin Idiomatic style
// –¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (Int) –≤—ã–≤–æ–¥–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
fun sum(a: Int, b: Int) = a + b

// –î–∞–∂–µ —Å –ª–æ–≥–∏–∫–æ–π
fun max(a: Int, b: Int) = if (a > b) a else b

```

### –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–≠—Ç–æ "—É–±–∏–π—Ü–∞" –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Builder –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫ –º–µ—Ç–æ–¥–æ–≤.

```kotlin
// –û–±—ä—è–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (=)
fun buildRequest(
    url: String, 
    method: String = "GET", 
    timeout: Int = 5000,
    headers: Map<String, String> = emptyMap()
) {
    println("Connecting to $url via $method with timeout $timeout")
}

fun main() {
    // 1. –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    buildRequest("https://google.com") 
    // –í—ã–≤–æ–¥: Connecting to https://google.com via GET with timeout 5000

    // 2. –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã (–ø–æ—Ä—è–¥–æ–∫ –Ω–µ –≤–∞–∂–µ–Ω!)
    // –ú—ã –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏ method, –Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ timeout
    buildRequest(
        url = "https://myserver.com", 
        timeout = 10000
    )

    // 3. –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å
    // –°—Ä–∞–≤–Ω–∏—Ç–µ —Å Java: buildRequest("url", null, 0, null) ‚Äî —á—Ç–æ –∑–Ω–∞—á–∞—Ç —ç—Ç–∏ null?
    // –í Kotlin –∫–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç —Å–∞–º —Å–µ–±—è.
}

```

---

## 2. Extension Functions (–§—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)

–≠—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –ª—é–±–∏–º—ã—Ö —Ñ–∏—á Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤ **–ª—é–±–æ–π** –∫–ª–∞—Å—Å (–¥–∞–∂–µ –≤ `String`, `List` –∏–ª–∏ –∫–ª–∞—Å—Å –∏–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏), –Ω–µ –Ω–∞—Å–ª–µ–¥—É—è—Å—å –æ—Ç –Ω–µ–≥–æ –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—è –ø–∞—Ç—Ç–µ—Ä–Ω "–î–µ–∫–æ—Ä–∞—Ç–æ—Ä".

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–í—ã –ø–∏—à–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, —É–∫–∞–∑—ã–≤–∞—è –ø–µ—Ä–µ–¥ –∏–º–µ–Ω–µ–º —Ç–∏–ø, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞—Å—à–∏—Ä—è–µ—Ç–µ (`Receiver Type`).

```kotlin
// –ó–∞–¥–∞—á–∞: –ù–∞—É—á–∏—Ç—å String –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω–∞ email-–æ–º.

// String - —ç—Ç–æ Receiver Type (–¢–∏–ø-–ø–æ–ª—É—á–∞—Ç–µ–ª—å)
// this - —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–º –æ–±—ä–µ–∫—Ç —Å—Ç—Ä–æ–∫–∏
fun String.isEmail(): Boolean {
    return this.contains("@") && this.contains(".")
}

// –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –µ—â–µ –∫–æ—Ä–æ—á–µ (single-expression)
fun String.removeSpaces(): String = this.replace(" ", "")

fun main() {
    val input = "user@example.com"
    
    // –í—ã–∑—ã–≤–∞–µ–º –∫–∞–∫ —Ä–æ–¥–Ω–æ–π –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞ String!
    if (input.isEmail()) { 
        println("Valid email")
    }
    
    println("Hello World".removeSpaces()) // HelloWorld
}

```

### ‚ö†Ô∏è –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å (Under the hood)

Extension function ‚Äî —ç—Ç–æ **—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞–≥–∏—è**. –û–Ω–∞ –Ω–µ –º–µ–Ω—è–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∫–ª–∞—Å—Å –±–∞–π—Ç-–∫–æ–¥–∞.
–í Java —ç—Ç–æ—Ç –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤:

```java
// –¢–æ, –≤–æ —á—Ç–æ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —ç—Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä:
public static boolean isEmail(String $this) {
    return $this.contains("@") && $this.contains(".");
}

```

**–°–ª–µ–¥—Å—Ç–≤–∏–µ:** Extension —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ `private` –∏–ª–∏ `protected` –ø–æ–ª—è–º –∫–ª–∞—Å—Å–∞. –û–Ω–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –ø—É–±–ª–∏—á–Ω–æ (`public`).

---

## 3. –õ—è–º–±–¥—ã –∏ High-Order Functions

–í Java 8 –ø–æ—è–≤–∏–ª–∏—Å—å –ª—è–º–±–¥—ã, –Ω–æ –≤ Kotlin –æ–Ω–∏ –≤–æ–∑–≤–µ–¥–µ–Ω—ã –≤ –∞–±—Å–æ–ª—é—Ç. –§—É–Ω–∫—Ü–∏–∏ ‚Äî —ç—Ç–æ "–≥—Ä–∞–∂–¥–∞–Ω–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞". –ò—Ö –º–æ–∂–Ω–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å.

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ª—è–º–±–¥

–õ—è–º–±–¥–∞ ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∫—É—Å–æ–∫ –∫–æ–¥–∞ –≤ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö `{ ... }`.

```kotlin
// –¢–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π: (Int, Int) -> Int
// –ó–Ω–∞—á–µ–Ω–∏–µ: { x, y -> x + y }
val sumLambda: (Int, Int) -> Int = { x, y -> x + y }

println(sumLambda(2, 3)) // 5

```

### –ì–ª–∞–≤–Ω—ã–µ —Ñ–∏—à–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

**1. `it`: –Ω–µ—è–≤–Ω–æ–µ –∏–º—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞**
–ï—Å–ª–∏ —É –ª—è–º–±–¥—ã –æ–¥–∏–Ω –∞—Ä–≥—É–º–µ–Ω—Ç, –µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ –æ–±—ä—è–≤–ª—è—Ç—å. –û–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ `it`.

```kotlin
val numbers = listOf(1, 2, 3, 4, 5)

// Java style: numbers.stream().filter(n -> n > 2)...
// Kotlin:
val res = numbers.filter { it > 2 } 

```

**2. Trailing Lambda (–õ—è–º–±–¥–∞ –≤ —Ö–≤–æ—Å—Ç–µ)**
–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—è–º–±–¥—É **–ø–æ—Å–ª–µ–¥–Ω–∏–º** –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º, –µ—ë –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –∑–∞ —Å–∫–æ–±–∫–∏ `()`. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è DSL.

```kotlin
// –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –∏ –¥–µ–π—Å—Ç–≤–∏–µ (—Ñ—É–Ω–∫—Ü–∏—é)
fun processString(str: String, operation: (String) -> Unit) {
    operation(str)
}

fun main() {
    // –í–∞—Ä–∏–∞–Ω—Ç 1 (–ù–µ–∫—Ä–∞—Å–∏–≤–æ, –ª—è–º–±–¥–∞ –≤–Ω—É—Ç—Ä–∏ —Å–∫–æ–±–æ–∫):
    processString("Hello", { s -> println(s.uppercase()) })

    // –í–∞—Ä–∏–∞–Ω—Ç 2 (Idiomatic Kotlin):
    // –°–∫–æ–±–∫–∞ –∑–∞–∫—Ä—ã–ª–∞—Å—å –ø–æ—Å–ª–µ "Hello", –ª—è–º–±–¥–∞ –ø–æ—à–ª–∞ —Å–ª–µ–¥–æ–º.
    processString("Hello") { 
        println(it.uppercase()) 
    }
}

```

---

### –ü—Ä–∞–∫—Ç–∏–∫–∞: –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –±–µ–∑ Stream API

–í Java, —á—Ç–æ–±—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –µ–≥–æ, –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Å—Ç—Ä–∏–º: `list.stream().filter(...).map(...).collect(...)`.
–í Kotlin —Ñ—É–Ω–∫—Ü–∏–∏ `filter`, `map` –∏ –¥—Ä—É–≥–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∫–∞–∫ Extension Functions.

```kotlin
data class User(val name: String, val age: Int)

fun main() {
    val users = listOf(
        User("Alice", 25),
        User("Bob", 17),
        User("Charlie", 30)
    )

    // –ó–∞–¥–∞—á–∞: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–º–µ–Ω —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ.

    val names = users
        .filter { it.age >= 18 } // –û—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∑—Ä–æ—Å–ª—ã—Ö
        .map { it.name.uppercase() } // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç User -> String
        // .toList() –∏ .collect() –ù–ï –ù–£–ñ–ù–´. map —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π List.

    println(names) // [ALICE, CHARLIE]
}

```

---

### üí° –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–í—ã –º–æ–∂–µ—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å: *"–ï—Å–ª–∏ —è –∏—Å–ø–æ–ª—å–∑—É—é `filter` –∏ `map`, –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –ª–∏ –ª–∏—à–Ω–∏–µ —Å–ø–∏—Å–∫–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ?"*
–û—Ç–≤–µ—Ç: **–î–∞, —Å–æ–∑–¥–∞—é—Ç—Å—è.** –î–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π —ç—Ç–æ –Ω–µ–≤–∞–∂–Ω–æ.

–ï—Å–ª–∏ —É –≤–∞—Å —Å–ø–∏—Å–æ–∫ –Ω–∞ 100 000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —Ü–µ–ø–æ—á–∫–∞ `filter().map()` —Å–æ–∑–¥–∞—Å—Ç –¥–≤–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–ø–∏—Å–∫–∞. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Sequences** (–∞–Ω–∞–ª–æ–≥ Java Streams).

```kotlin
val names = users.asSequence() // <-- –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ –ª–µ–Ω–∏–≤—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    .filter { it.age >= 18 }   // –ù–∏—á–µ–≥–æ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
    .map { it.name.uppercase() } 
    .toList() // <-- –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, —Ç–æ–ª—å–∫–æ —Ç—É—Ç –≤—Å–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è

```

---

### –î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ (–º—ã—Å–ª–µ–Ω–Ω–æ–µ)

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–∑—è—Ç—å –ª—é–±–æ–π —Å–≤–æ–π Utility-–∫–ª–∞—Å—Å –∏–∑ Java (–≥–¥–µ –º–µ—Ç–æ–¥—ã —Ç–∏–ø–∞ `StringUtils.isEmpty(str)`) –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ –±—ã –æ–Ω –≤—ã–≥–ª—è–¥–µ–ª –Ω–∞ Kotlin —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Extension Functions (`str.isEmpty()`).

---

# üü° –£—Ä–æ–≤–µ–Ω—å 2: Idiomatic Kotlin (–ß–∞—Å—Ç—å 2)

## Scope Functions: `let`, `run`, `with`, `apply`, `also`

–í Java –≤—ã —á–∞—Å—Ç–æ –ø–∏—à–µ—Ç–µ —Ç–∞–∫:

```java
User user = new User();
user.setName("Alex");
user.setAge(25);
user.setCity("Moscow");
process(user);

```

–ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `user` –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 5 —Ä–∞–∑. Scope Functions –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –±–ª–æ–∫ –∫–æ–¥–∞ **–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ** –æ–±—ä–µ–∫—Ç–∞, –≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–±–∞–≤–∏–≤—à–∏—Å—å –æ—Ç –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –∏–º–µ–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.

–ò—Ö –≤—Å–µ–≥–æ –ø—è—Ç—å. –û–Ω–∏ –¥–µ–ª–∞—é—Ç –ø–æ—á—Ç–∏ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ, –Ω–æ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –¥–≤—É–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

1. **–ö–∞–∫ —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞:** `this` –∏–ª–∏ `it`.
2. **–ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è:** –°–∞–º –æ–±—ä–µ–∫—Ç (Context Object) –∏–ª–∏ –†–µ–∑—É–ª—å—Ç–∞—Ç –ª—è–º–±–¥—ã (Lambda Result).

–†–∞–∑–±–µ—Ä–µ–º –∫–∞–∂–¥—É—é –ø–æ–¥—Ä–æ–±–Ω–æ.

---

### 1. `apply` (–ù–∞—Å—Ç—Ä–æ–π—â–∏–∫)

**–°—É—Ç—å:** "–ü—Ä–∏–º–µ–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ —ç—Ç–æ–º—É –æ–±—ä–µ–∫—Ç—É –∏ –≤–µ—Ä–Ω–∏ **–µ–≥–æ –∂–µ**".

* **–°—Å—ã–ª–∫–∞:** `this` (–º–æ–∂–Ω–æ –æ–ø—É—Å–∫–∞—Ç—å).
* **–í–æ–∑–≤—Ä–∞—Ç:** –°–∞–º –æ–±—ä–µ–∫—Ç.

–°–∞–º—ã–π —á–∞—Å—Ç—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–æ–≤. –ó–∞–º–µ–Ω–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ Builder.

```kotlin
// Java
File file = new File("path/to/file.txt");
file.setExecutable(true);
file.setReadable(true);
file.setWritable(false);

// Kotlin
// –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∏ —Å—Ä–∞–∑—É –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞
val file = File("path/to/file.txt").apply {
    // –í–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ –º—ã –∫–∞–∫ –±—É–¥—Ç–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ File
    setExecutable(true) // —ç—Ç–æ this.setExecutable(true)
    setReadable(true)
    setWritable(false)
} // <-- apply –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ—Ç –∂–µ –æ–±—ä–µ–∫—Ç file

```

---

### 2. `let` (–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ç–æ—Ä / Null-check)

**–°—É—Ç—å:** "–í–æ–∑—å–º–∏ –æ–±—ä–µ–∫—Ç, —Å–¥–µ–ª–∞–π —Å –Ω–∏–º —á—Ç–æ-—Ç–æ –∏ –≤–µ—Ä–Ω–∏ **—Ä–µ–∑—É–ª—å—Ç–∞—Ç** (–ø–æ—Å–ª–µ–¥–Ω—é—é —Å—Ç—Ä–æ–∫—É)".

* **–°—Å—ã–ª–∫–∞:** `it` (–º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å).
* **–í–æ–∑–≤—Ä–∞—Ç:** –†–µ–∑—É–ª—å—Ç–∞—Ç –ª—è–º–±–¥—ã.

–°—Ü–µ–Ω–∞—Ä–∏–π 1: **Null-Safety**. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ null.

```kotlin
val str: String? = "Hello"

// str?.let { ... } –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –¢–û–õ–¨–ö–û –µ—Å–ª–∏ str != null
str?.let { 
    // –í–Ω—É—Ç—Ä–∏ it - —ç—Ç–æ String (—É–∂–µ –Ω–µ nullable!)
    println("Length is ${it.length}")
}

```

–°—Ü–µ–Ω–∞—Ä–∏–π 2: **–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è**. –ü—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ –¥—Ä—É–≥–æ–π –≤–Ω—É—Ç—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏.

```kotlin
val user = User("Alex", 25)

val message = user.let { u -> // –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª–∏ it –≤ u –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏
    // –î–µ–ª–∞–µ–º –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
    val isAdult = u.age >= 18
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç—Ä–æ–∫—É (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–ª–æ–∫–∞)
    "User ${u.name} is adult: $isAdult" 
}

```

---

### 3. `with` (–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤—ã–∑–æ–≤–æ–≤)

**–°—É—Ç—å:** "–° —ç—Ç–∏–º –æ–±—ä–µ–∫—Ç–æ–º —Å–¥–µ–ª–∞–π —Å–ª–µ–¥—É—é—â–µ–µ...".

* **–°—Å—ã–ª–∫–∞:** `this`.
* **–í–æ–∑–≤—Ä–∞—Ç:** –†–µ–∑—É–ª—å—Ç–∞—Ç –ª—è–º–±–¥—ã.
* *–û—Ç–ª–∏—á–∏–µ:* –≠—Ç–æ –Ω–µ extension-—Ñ—É–Ω–∫—Ü–∏—è, –∞ –æ–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è.

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –Ω—É–∂–µ–Ω, –Ω–æ –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –º–Ω–æ–≥–æ –º–µ—Ç–æ–¥–æ–≤ —É –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

```kotlin
val numbers = mutableListOf("One", "Two", "Three")

val firstAndLast = with(numbers) {
    // this —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ numbers
    "First is $first(), last is $last()" // –ú–µ—Ç–æ–¥—ã List –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
}

```

---

### 4. `run` (–ì–∏–±—Ä–∏–¥ `with` –∏ `let`)

**–°—É—Ç—å:** "–ó–∞–ø—É—Å—Ç–∏ –±–ª–æ–∫ –∫–æ–¥–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç–µ –∏ –≤–µ—Ä–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç".

* **–°—Å—ã–ª–∫–∞:** `this`.
* **–í–æ–∑–≤—Ä–∞—Ç:** –†–µ–∑—É–ª—å—Ç–∞—Ç –ª—è–º–±–¥—ã.

–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–æ–π—Å—Ç–≤ –æ–±—ä–µ–∫—Ç–∞ + –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è.

```kotlin
val service = MultiLayerService()

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–µ—Ä–≤–∏—Å –ò —Å—Ä–∞–∑—É –≤—ã—á–∏—Å–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
val result = service.run {
    port = 8080
    init()       // –º–µ—Ç–æ–¥ —Å–µ—Ä–≤–∏—Å–∞
    queryData()  // –º–µ—Ç–æ–¥ —Å–µ—Ä–≤–∏—Å–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç String
} // result –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ç–∏–ø String (—Ä–µ–∑—É–ª—å—Ç–∞—Ç queryData)

```

---

### 5. `also` (–ü–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã)

**–°—É—Ç—å:** "–ê —Ç–∞–∫–∂–µ —Å–¥–µ–ª–∞–π –≤–æ—Ç —ç—Ç–æ (–Ω–µ –º–µ–Ω—è—è –∫–æ–Ω—Ç–µ–∫—Å—Ç)".

* **–°—Å—ã–ª–∫–∞:** `it`.
* **–í–æ–∑–≤—Ä–∞—Ç:** –°–∞–º –æ–±—ä–µ–∫—Ç.

–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ —Ü–µ–ø–æ—á–∫–µ –≤—ã–∑–æ–≤–æ–≤. –û–Ω –≥–æ–≤–æ—Ä–∏—Ç: "–Ø –Ω–µ —Ç—Ä–æ–≥–∞—é –æ–±—ä–µ–∫—Ç, —è –ø—Ä–æ—Å—Ç–æ —Å–º–æ—Ç—Ä—é".

```kotlin
val book = Book("Kotlin Guide")
    .apply { price = 100 } // –ù–∞—Å—Ç—Ä–æ–∏–ª–∏
    .also { println("Book created: $it") } // –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞–ª–∏ (it = Book)
    .apply { price = 90 } // –°–Ω–æ–≤–∞ –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ (—Å–∫–∏–¥–∫–∞)

// –í –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ø–æ–ø–∞–¥–µ—Ç –∫–Ω–∏–≥–∞ —Å —Ü–µ–Ω–æ–π 90. 
// also –Ω–µ –ø–æ–≤–ª–∏—è–ª –Ω–∞ —Ü–µ–ø–æ—á–∫—É –≤–æ–∑–≤—Ä–∞—Ç–∞.

```

---

### ‚ö° –®–ø–∞—Ä–≥–∞–ª–∫–∞: –ö–∞–∫ –≤—ã–±—Ä–∞—Ç—å?

–Ø —Å–æ—Å—Ç–∞–≤–∏–ª –¥–ª—è –≤–∞—Å –º–∞—Ç—Ä–∏—Ü—É —Ä–µ—à–µ–Ω–∏–π. –ó–∞–¥–∞–π—Ç–µ —Å–µ–±–µ –¥–≤–∞ –≤–æ–ø—Ä–æ—Å–∞:

1. **–ù—É–∂–µ–Ω –ª–∏ –º–Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (–Ω–æ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è)?**
* **–ù–µ—Ç (–Ω—É–∂–µ–Ω —Å–∞–º –æ–±—ä–µ–∫—Ç):** –í—ã–±–∏—Ä–∞–π—Ç–µ `apply` –∏–ª–∏ `also`.
* **–î–∞ (–Ω—É–∂–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–ª–æ–∫–∞):** –í—ã–±–∏—Ä–∞–π—Ç–µ `let`, `run` –∏–ª–∏ `with`.


2. **–ö–∞–∫ —É–¥–æ–±–Ω–µ–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –æ–±—ä–µ–∫—Ç—É?**
* **–ö–∞–∫ `this` (–º–µ—Ç–æ–¥—ã –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞):** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `apply`, `run`, `with`. (–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—ä–µ–∫—Ç–∞).
* **–ö–∞–∫ `it` (–∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç):** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `let`, `also`. (–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –¥–∞–ª—å—à–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ –Ω—É–∂–µ–Ω –ª–æ–≥).



| –§—É–Ω–∫—Ü–∏—è | –°—Å—ã–ª–∫–∞ | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç | –î–ª—è —á–µ–≥–æ –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è? |
| --- | --- | --- | --- |
| **`apply`** | `this` | **Obj** | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—ä–µ–∫—Ç–∞ (Config/Builder) |
| **`also`** | `it` | **Obj** | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã |
| **`let`** | `it` | Result | Null-check (`?.let`), –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è, –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è |
| **`run`** | `this` | Result | –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —á–µ–≥–æ-—Ç–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–æ–π—Å—Ç–≤ –æ–±—ä–µ–∫—Ç–∞ |
| **`with`** | `this` | Result | –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–æ–≤ (—Ä–µ–¥–∫–æ –Ω—É–∂–µ–Ω, `run` —É–¥–æ–±–Ω–µ–µ) |

---

### –ü—Ä–∏–º–µ—Ä "–ê–¥–∞ –∏–∑ Scope Functions" (–ö–∞–∫ –Ω–µ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å)

–ù–æ–≤–∏—á–∫–∏ —á–∞—Å—Ç–æ –Ω–∞—á–∏–Ω–∞—é—Ç –≤–∫–ª–∞–¥—ã–≤–∞—Ç—å –∏—Ö –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –Ω–µ—á–∏—Ç–∞–µ–º—ã–º.

```kotlin
// –ü–õ–û–•–û:
val result = File("text.txt").apply {
    setReadable(true)
}.let { file ->
    file.readLines().also { lines ->
        println("Read ${lines.size} lines")
    }.map { line ->
        line.uppercase()
    }
}
// –ó–¥–µ—Å—å —Ç–µ—Ä—è–µ—Ç—Å—è –Ω–∏—Ç—å: —á—Ç–æ —Ç–∞–∫–æ–µ it? –≥–¥–µ this?

```

**–ü—Ä–∞–≤–∏–ª–æ:** –ù–µ –≤–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ Scope Functions –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞, –µ—Å–ª–∏ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ. –õ—É—á—à–µ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –æ–±—ã—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

---

# üî¥ –£—Ä–æ–≤–µ–Ω—å 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ß–∞—Å—Ç—å 1)

## Sealed Classes & Interfaces: –°—É–ø–µ—Ä-—ç–Ω–∞–º—ã

–í Java —É –Ω–∞—Å –µ—Å—Ç—å `Enum` –¥–ª—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç.

* **–ü—Ä–æ–±–ª–µ–º–∞ Enum:** –£ –≤—Å–µ—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ —Å–∫–∞–∑–∞—Ç—å: "–í —Å—Ç–∞—Ç—É—Å–µ SUCCESS —É –º–µ–Ω—è –ª–µ–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–∞–Ω–Ω—ã—Ö, –∞ –≤ —Å—Ç–∞—Ç—É—Å–µ ERROR ‚Äî —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏".
* **–†–µ—à–µ–Ω–∏–µ Kotlin:** `Sealed Class` (–ó–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å).

–≠—Ç–æ –∏–µ—Ä–∞—Ä—Ö–∏—è –∫–ª–∞—Å—Å–æ–≤, –≥–¥–µ **–≤—Å–µ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∏ –∏–∑–≤–µ—Å—Ç–Ω—ã –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**.

### –ü—Ä–∏–º–µ—Ä: –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–µ—Ç–∏

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —ç–∫—Ä–∞–Ω, –∫–æ—Ç–æ—Ä—ã–π –≥—Ä—É–∑–∏—Ç —Å–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π. –£ –Ω–µ–≥–æ –º–æ–∂–µ—Ç –±—ã—Ç—å 3 —Å–æ—Å—Ç–æ—è–Ω–∏—è:

1. **Loading**: –ü—Ä–æ—Å—Ç–æ –∫—Ä—É—Ç–∏—Ç—Å—è —Å–ø–∏–Ω–Ω–µ—Ä (–¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç).
2. **Success**: –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—à–ª–∏ (–Ω—É–∂–µ–Ω —Å–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π).
3. **Error**: –û—à–∏–±–∫–∞ (–Ω—É–∂–µ–Ω —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –∏–∫–æ–Ω–∫–∞).

–í Java –≤—ã –±—ã —Å–æ–∑–¥–∞–ª–∏ –∫–ª–∞—Å—Å —Å –∫—É—á–µ–π –ø–æ–ª–µ–π `List data`, `String error`, `boolean isLoading` –∏ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ –±—ã –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏. –í Kotlin –º—ã –º–æ–¥–µ–ª–∏—Ä—É–µ–º —ç—Ç–æ —á–µ—Ä–µ–∑ —Ç–∏–ø—ã.

```kotlin
// –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ sealed
sealed class UiState {
    
    // 1. –°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ - –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º object (—Å–∏–Ω–≥–ª—Ç–æ–Ω)
    object Loading : UiState()
    
    // 2. –£—Å–ø–µ—Ö - —Ö—Ä–∞–Ω–∏–º —Å–ø–∏—Å–æ–∫. –ò—Å–ø–æ–ª—å–∑—É–µ–º data class
    data class Success(val news: List<String>) : UiState()
    
    // 3. –û—à–∏–±–∫–∞ - —Ö—Ä–∞–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –∫–æ–¥ –æ—à–∏–±–∫–∏
    data class Error(val message: String, val code: Int) : UiState()
}

```

### –ì–ª–∞–≤–Ω–∞—è —Ñ–∏—à–∫–∞: –ò—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏–π `when`

–ü–æ—Å–∫–æ–ª—å–∫—É –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∑–Ω–∞–µ—Ç, —á—Ç–æ —É `UiState` –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ 3 –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞ (–∏ –Ω–∏–∫—Ç–æ –¥—Ä—É–≥–æ–π –Ω–µ –º–æ–∂–µ—Ç —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç –Ω–µ–≥–æ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è/–ø–∞–∫–µ—Ç–∞), –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `when` **–±–µ–∑ –≤–µ—Ç–∫–∏ `else**`.

–≠—Ç–æ **–≥–∞—Ä–∞–Ω—Ç–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –µ—Å–ª–∏ –≤—ã –¥–æ–±–∞–≤–∏—Ç–µ –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ–¥—Å–≤–µ—Ç–∏—Ç –∫—Ä–∞—Å–Ω—ã–º –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –≤—ã –∑–∞–±—ã–ª–∏ –µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å.

```kotlin
fun updateScreen(state: UiState) {
    // else –Ω–µ –Ω—É–∂–µ–Ω! –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –∑–Ω–∞–µ—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã.
    when (state) {
        is UiState.Loading -> {
            showSpinner()
        }
        is UiState.Success -> {
            hideSpinner()
            // Smart Cast: –∑–¥–µ—Å—å state –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤–µ–¥–µ–Ω –∫ —Ç–∏–ø—É Success
            // –ú—ã –º–æ–∂–µ–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ .news –Ω–∞–ø—Ä—è–º—É—é
            showList(state.news) 
        }
        is UiState.Error -> {
            hideSpinner()
            // Smart Cast –∫ —Ç–∏–ø—É Error
            showErrorToast("${state.message} (Code: ${state.code})")
        }
    }
}

```

### Sealed Interface

–ù–∞—á–∏–Ω–∞—è —Å Kotlin 1.5, –ø–æ—è–≤–∏–ª–∏—Å—å `sealed interface`.
–†–∞–∑–Ω–∏—Ü–∞ —Ç–∞–∫–∞—è –∂–µ, –∫–∞–∫ –º–µ–∂–¥—É –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º –∫–ª–∞—Å—Å–æ–º –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

* –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sealed class`, –µ—Å–ª–∏ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞–º –Ω—É–∂–Ω–æ –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø–æ–ª—è) –∏–ª–∏ –ª–æ–≥–∏–∫–∞ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ.
* –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sealed interface`, –µ—Å–ª–∏ –æ–±—â–µ–π –ª–æ–≥–∏–∫–∏ –Ω–µ—Ç (–∏–ª–∏ –∫–ª–∞—Å—Å —É–∂–µ –Ω–∞—Å–ª–µ–¥—É–µ—Ç –¥—Ä—É–≥–æ–π –∫–ª–∞—Å—Å, —Ç–∞–∫ –∫–∞–∫ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –∑–∞–ø—Ä–µ—â–µ–Ω–æ).

```kotlin
sealed interface ClickEvent {
    data class OpenArticle(val id: Int) : ClickEvent
    object BackPressed : ClickEvent
}

```

---

### –ß–µ–º —ç—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç Abstract Class?

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Abstract Class | Sealed Class |
| --- | --- | --- |
| **–ù–∞—Å–ª–µ–¥–Ω–∏–∫–∏** | –ö—Ç–æ —É–≥–æ–¥–Ω–æ, –≥–¥–µ —É–≥–æ–¥–Ω–æ | –°—Ç—Ä–æ–≥–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤ —Ç–æ–º –∂–µ –ø–∞–∫–µ—Ç–µ/–º–æ–¥—É–ª–µ |
| **`when`** | –¢—Ä–µ–±—É–µ—Ç `else` | **–ù–µ —Ç—Ä–µ–±—É–µ—Ç `else**` (–∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞) |
| **–°–º—ã—Å–ª** | "–ï—Å—Ç—å –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞" | "–≠—Ç–æ –∑–∞–∫—Ä—ã—Ç—ã–π –Ω–∞–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤" (–í–∞—Ä–∏–∞–Ω—Ç –ê –ò–õ–ò –í–∞—Ä–∏–∞–Ω—Ç –ë) |

---

### –ì–¥–µ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å? (Real-world cases)

1. **MVI / MVVM Architectures:** –°–æ—Å—Ç–æ—è–Ω–∏—è —ç–∫—Ä–∞–Ω–∞ (`LCE` - Loading/Content/Error).
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –í–º–µ—Å—Ç–æ –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏—è `Exception`, —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç sealed class `Result`:
```kotlin
sealed class LoginResult {
    object Success : LoginResult()
    object InvalidPassword : LoginResult()
    object NetworkError : LoginResult()
}

```


3. **View Types –≤ —Å–ø–∏—Å–∫–∞—Ö (RecyclerView):** –ï—Å–ª–∏ —É –≤–∞—Å –≤ —Å–ø–∏—Å–∫–µ –µ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–ó–∞–≥–æ–ª–æ–≤–æ–∫, –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞, –†–µ–∫–ª–∞–º–∞), –æ–ø–∏—à–∏—Ç–µ –∏—Ö –∫–∞–∫ sealed class, –∏ –≤ –∞–¥–∞–ø—Ç–µ—Ä–µ `when` –ø–æ–º–æ–∂–µ—Ç –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–±—ã—Ç—å.

---

### üí° –õ–∞–π—Ñ—Ö–∞–∫ –¥–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

–î—É–º–∞–π—Ç–µ –æ `Sealed Class` –∫–∞–∫ –æ–± **"Enums with Data"** (–≠–Ω–∞–º–∞—Ö —Å –¥–∞–Ω–Ω—ã–º–∏).

* –ï—Å–ª–∏ —É —Å—Ç–∞—Ç—É—Å–æ–≤ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω—ã–π `Enum`.
* –ï—Å–ª–∏ —Ö–æ—Ç—å —É –æ–¥–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ (–∫–∞–∫ —Å–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π –≤ `Success`) ‚Äî —ç—Ç–æ `Sealed Class`.

---

# üî¥ –£—Ä–æ–≤–µ–Ω—å 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ß–∞—Å—Ç—å 2)

## 1. –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Class Delegation)

–í Java, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω **–î–µ–∫–æ—Ä–∞—Ç–æ—Ä** (–æ–±–µ—Ä–Ω—É—Ç—å –∫–ª–∞—Å—Å, –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä—É –º–µ—Ç–æ–¥–æ–≤, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å –≤–Ω—É—Ç—Ä—å), –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

–í Kotlin –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∑–∞ –≤–∞—Å.

### –ó–∞–¥–∞—á–∞: "–°–ø–∏—Å–æ–∫ —Å –ª–æ–≥–≥–µ—Ä–æ–º"

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π `ArrayList`, –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥–µ—Ç —Å–µ–±—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π —Å–ø–∏—Å–æ–∫, –Ω–æ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø–∏—à–µ—Ç –ª–æ–≥ –≤ –∫–æ–Ω—Å–æ–ª—å.
–ù–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è –æ—Ç `ArrayList` ‚Äî –ø–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ (–Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏).
–õ—É—á—à–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `MutableList` –∏ —Ö—Ä–∞–Ω–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ –Ω–∞—Å—Ç–æ—è—â–∏–π —Å–ø–∏—Å–æ–∫.

**Java (–ë–æ–ª—å –∏ —Å—Ç—Ä–∞–¥–∞–Ω–∏—è):**
–í–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å 20+ –º–µ—Ç–æ–¥–æ–≤ (`size()`, `get()`, `clear()`, `iterator()`...), –∏ –≤ –∫–∞–∂–¥–æ–º –ø–∏—Å–∞—Ç—å `return innerList.method()`.

**Kotlin (–ú–∞–≥–∏—è `by`):**

```kotlin
// –ú—ã —Ä–µ–∞–ª–∏–∑—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å MutableList<T>
// –ù–æ –≥–æ–≤–æ—Ä–∏–º: "–í—Å–µ –º–µ—Ç–æ–¥—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤–æ–∑—å–º–∏ —É –æ–±—ä–µ–∫—Ç–∞ innerList"
class LoggingList<T>(
    private val innerList: MutableList<T> = ArrayList()
) : MutableList<T> by innerList { 

    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –¢–û–õ–¨–ö–û —Ç–æ, —á—Ç–æ —Ö–æ—Ç–∏–º –∏–∑–º–µ–Ω–∏—Ç—å
    override fun add(element: T): Boolean {
        println("Adding element: $element")
        // –í—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ —É —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
        return innerList.add(element) 
    }
    
    // –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã (get, remove, size) —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä.
    // –û–Ω–∏ –ø—Ä–æ—Å—Ç–æ –±—É–¥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å innerList.–º–µ—Ç–æ–¥()
}

fun main() {
    val list = LoggingList<String>()
    list.add("Hello") // –ù–∞–ø–µ—á–∞—Ç–∞–µ—Ç: Adding element: Hello
    println(list.size) // 1 (–≤—ã–∑–æ–≤ –ø—Ä–æ–±—Ä–æ—à–µ–Ω –≤ innerList)
}

```

–≠—Ç–æ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è **–æ–±–µ—Ä—Ç–æ–∫ (Wrappers)** –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –±–µ–∑ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.

---

## 2. –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (Property Delegation)

–≠—Ç–æ —Ñ–∏—á–∞, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ—Ç –≤ Java. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É `get()` –∏ `set()` —Å–≤–æ–π—Å—Ç–≤–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å.

–°–∏–Ω—Ç–∞–∫—Å–∏—Å: `val/var –∏–º—è by –î–µ–ª–µ–≥–∞—Ç`.

### –°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –¥–µ–ª–µ–≥–∞—Ç: `by lazy`

–í Java –ª–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ —Ç—è–∂–µ–ª–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏) ‚Äî —ç—Ç–æ –≥—Ä–æ–º–æ–∑–¥–∫–∏–π –∫–æ–¥ —Å `if (field == null)` –∏ `synchronized` (Double-checked locking).

–í Kotlin —ç—Ç–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ—á–∫–∞:

```kotlin
class Database {
    // connect() - —Ç—è–∂–µ–ª–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
    fun connect() { println("Connected!") }
}

class App {
    // db –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∑–¥–µ—Å—å!
    val db by lazy {
        println("Initializing Database...")
        Database() // –≠—Ç–æ—Ç –±–ª–æ–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ 1 —Ä–∞–∑
    }
}

fun main() {
    val app = App()
    println("App created")
    
    // –ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤: –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –±–ª–æ–∫ lazy, —Å–æ–∑–¥–∞—Å—Ç—Å—è –æ–±—ä–µ–∫—Ç, –≤–µ—Ä–Ω–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    app.db.connect() 
    
    // –í—Ç–æ—Ä–æ–π –≤—ã–∑–æ–≤: –ø—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω–µ—Ç—Å—è —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç
    app.db.connect() 
}
/* –í—ã–≤–æ–¥:
App created
Initializing Database...
Connected!
Connected!
*/

```

*–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `lazy` –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–µ–Ω (synchronized).*

### `by observable` (–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±–Ω–æ–≤–ª—è—Ç—å UI –∏–ª–∏ –ø–∏—Å–∞—Ç—å –ª–æ–≥ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏).

```kotlin
import kotlin.properties.Delegates

class User {
    var name: String by Delegates.observable("NoName") { prop, old, new ->
        println("Name changed from '$old' to '$new'")
    }
}

fun main() {
    val user = User()
    user.name = "Alex" // –í—ã–≤–æ–¥: Name changed from 'NoName' to 'Alex'
    user.name = "Bob"  // –í—ã–≤–æ–¥: Name changed from 'Alex' to 'Bob'
}

```

### `by map` (–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –≤ Map)

–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ JSON –∏–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö. –í—ã –º–æ–∂–µ—Ç–µ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—è –∫–ª–∞—Å—Å–∞ –ø—Ä—è–º–æ –≤ –∫–∞—Ä—Ç—É.

```kotlin
class User(val map: Map<String, Any?>) {
    val name: String by map
    val age: Int     by map
}

fun main() {
    val data = mapOf(
        "name" to "John Doe",
        "age"  to 25
    )
    
    val user = User(data)
    println(user.name) // John Doe
}

```

---

## 3. –ö–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–π –¥–µ–ª–µ–≥–∞—Ç? (Under the hood)

–≠—Ç–æ –Ω–µ –º–∞–≥–∏—è, –∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç. –î–µ–ª–µ–≥–∞—Ç ‚Äî —ç—Ç–æ –ª—é–±–æ–π –∫–ª–∞—Å—Å, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä `getValue` (–∏ `setValue` –¥–ª—è `var`).

–ü—Ä–∏–º–µ—Ä: –î–µ–ª–µ–≥–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ, —á—Ç–æ –±—ã –≤—ã —Ç—É–¥–∞ –Ω–∏ –ø–æ–ª–æ–∂–∏–ª–∏.

```kotlin
import kotlin.reflect.KProperty

class UpperCaseDelegate {
    private var value: String = ""

    // –û–ø–µ—Ä–∞—Ç–æ—Ä —á—Ç–µ–Ω–∏—è
    operator fun getValue(thisRef: Any?, property: KProperty<*>): String {
        return value
    }

    // –û–ø–µ—Ä–∞—Ç–æ—Ä –∑–∞–ø–∏—Å–∏
    operator fun setValue(thisRef: Any?, property: KProperty<*>, newValue: String) {
        value = newValue.uppercase() // –õ–æ–≥–∏–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∑–¥–µ—Å—å
    }
}

class Example {
    var text: String by UpperCaseDelegate()
}

fun main() {
    val ex = Example()
    ex.text = "hello"
    println(ex.text) // HELLO
}

```

### –ì–¥–µ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏?

1. **Android:** `val viewModel by viewModels()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ ViewModel —á–µ—Ä–µ–∑ –¥–µ–ª–µ–≥–∞—Ç.
2. **Koin / Kodein (DI):** `val repository by inject()` ‚Äî –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
3. **–ë–î (Exposed):** –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö: `val name by varchar("name", 50)`.

---

### üí° –†–µ–∑—é–º–µ

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **Class Delegation (`by list`)**, —á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å –º–µ—Ç–æ–¥—ã-–ø—Ä–æ–∫—Å–∏ –≤—Ä—É—á–Ω—É—é –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –î–µ–∫–æ—Ä–∞—Ç–æ—Ä.
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **`by lazy`** –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤. –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç.
3. –î–µ–ª–µ–≥–∞—Ç—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≥–µ—Ç—Ç–µ—Ä–æ–≤/—Å–µ—Ç—Ç–µ—Ä–æ–≤.

---

# üî¥ –£—Ä–æ–≤–µ–Ω—å 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ß–∞—Å—Ç—å 3)

## 1. Reified Type Parameters (–ü–æ–±–µ–¥–∞ –Ω–∞–¥ —Å—Ç–∏—Ä–∞–Ω–∏–µ–º —Ç–∏–ø–æ–≤)

**–ü—Ä–æ–±–ª–µ–º–∞ Java (Type Erasure):**
–í Java (–∏ –≤ Kotlin –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –¥–∂–µ–Ω–µ—Ä–∏–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –¥–æ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –í –±–∞–π—Ç-–∫–æ–¥–µ `List<String>` –∏ `List<Integer>` –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –≤ `List`.
–ü–æ—ç—Ç–æ–º—É –Ω–µ–ª—å–∑—è –Ω–∞–ø–∏—Å–∞—Ç—å: `if (obj instanceof T)` –∏–ª–∏ `new T()`. JVM –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Ç–∞–∫–æ–µ `T` –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ Kotlin:** `inline` —Ñ—É–Ω–∫—Ü–∏–∏ + `reified`.
–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ `inline`, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤—Å—Ç–∞–≤–ª—è–µ—Ç –µ—ë –∫–æ–¥ –ø—Ä—è–º–æ –≤ –º–µ—Å—Ç–æ –≤—ã–∑–æ–≤–∞. –ê –∑–Ω–∞—á–∏—Ç, –æ–Ω **–∑–Ω–∞–µ—Ç**, –∫–∞–∫–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Ç–∏–ø –≤—ã —Ç—É–¥–∞ –ø–µ—Ä–µ–¥–∞–ª–∏.

### –ü—Ä–∏–º–µ—Ä: JSON –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è

**Java (Old school):**
–í–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `Class<T>` –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º, —á—Ç–æ–±—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–Ω–∞–ª–∞, —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å.

```java
// Java
User user = gson.fromJson(json, User.class);

```

**Kotlin (Reified):**
–ú—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —Ç–∏–ø `T` –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω.

```kotlin
// –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ inline –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
// reified T - —Ç–µ–ø–µ—Ä—å T —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞–Ω—Ç–∞–π–º–µ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
inline fun <reified T> String.toObject(): T {
    // –ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å Gson
    return Gson().fromJson(this, T::class.java) 
}

fun main() {
    val json = """{"name":"Alex"}"""
    
    // –í–´–ó–û–í: –ú—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–µ–º User::class.java —è–≤–Ω–æ!
    // Kotlin —Å–∞–º –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç User –±–ª–∞–≥–æ–¥–∞—Ä—è –≤—ã–≤–æ–¥—É —Ç–∏–ø–æ–≤.
    val user: User = json.toObject() 
}

```

### –ü—Ä–∏–º–µ—Ä 2: –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ —Ç–∏–ø—É

```kotlin
val list = listOf(1, "Hello", 2, "World", 3.0)

// filterIsInstance –∏—Å–ø–æ–ª—å–∑—É–µ—Ç reified T –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º
val strings: List<String> = list.filterIsInstance<String>()

println(strings) // [Hello, World]

```

–í Java —Ç–∞–∫–æ–π –º–µ—Ç–æ–¥ –Ω–∞–ø–∏—Å–∞—Ç—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –±–µ–∑ –ø–µ—Ä–µ–¥–∞—á–∏ `Class<String>`.

---

## 2. Variance: `in` –∏ `out` (–í–º–µ—Å—Ç–æ `? super` –∏ `? extends`)

–≠—Ç–æ —Å–∞–º–∞—è —Å–ª–æ–∂–Ω–∞—è —á–∞—Å—Ç—å –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, –Ω–æ —Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –±–∏–±–ª–∏–æ—Ç–µ–∫.

–í—Å–ø–æ–º–Ω–∏–º –ø—Ä–∞–≤–∏–ª–æ **PECS** –∏–∑ Java:

* **P**roducer **E**xtends (–ï—Å–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è **–æ—Ç–¥–∞–µ—Ç** –¥–∞–Ω–Ω—ã–µ -> `? extends T`)
* **C**onsumer **S**uper (–ï—Å–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏—è **–ø—Ä–∏–Ω–∏–º–∞–µ—Ç** –¥–∞–Ω–Ω—ã–µ -> `? super T`)

–í Kotlin —ç—Ç–∏ —Å–ª–æ–≤–∞ –∑–∞–º–µ–Ω–∏–ª–∏ –Ω–∞ –ø–æ–Ω—è—Ç–Ω—ã–µ `out` –∏ `in`.

### `out` (–ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å) ‚Äî Producer

"–Ø —Ç–æ–ª—å–∫–æ –æ—Ç–¥–∞—é `T` (–≤–æ–∑–≤—Ä–∞—â–∞—é –∏–∑ —Ñ—É–Ω–∫—Ü–∏–π), –Ω–æ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é".

–ï—Å–ª–∏ –∫–ª–∞—Å—Å `Producer<out T>`, —Ç–æ `Producer<String>` –º–æ–∂–Ω–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `Producer<Any>`. –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –º—ã —Ç–æ–ª—å–∫–æ *—á–∏—Ç–∞–µ–º* –æ—Ç—Ç—É–¥–∞.

```kotlin
// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–æ–ª—å–∫–æ –í–û–ó–í–†–ê–©–ê–ï–¢ T (Producer)
interface Source<out T> {
    fun nextT(): T
}

fun demo(strings: Source<String>) {
    // –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü–æ—Ç–æ–º—É —á—Ç–æ String - —ç—Ç–æ Any.
    // –ú—ã –º–æ–∂–µ–º —á–∏—Ç–∞—Ç—å String –∏ —Å—á–∏—Ç–∞—Ç—å –∏—Ö Any.
    val objects: Source<Any> = strings 
}

```

–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ: `List<T>` (–Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π) –æ–±—ä—è–≤–ª–µ–Ω –∫–∞–∫ `List<out E>`. –ü–æ—ç—Ç–æ–º—É `List<String>` —è–≤–ª—è–µ—Ç—Å—è –ø–æ–¥—Ç–∏–ø–æ–º `List<Any>`.

### `in` (–ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å) ‚Äî Consumer

"–Ø —Ç–æ–ª—å–∫–æ –ø—Ä–∏–Ω–∏–º–∞—é `T` (–∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–π), –Ω–æ –Ω–µ –æ—Ç–¥–∞—é".

–ï—Å–ª–∏ –∫–ª–∞—Å—Å `Consumer<in T>`, —Ç–æ `Consumer<Number>` –º–æ–∂–Ω–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –≤ `Consumer<Int>`.
*–ó–≤—É—á–∏—Ç –Ω–µ–ª–æ–≥–∏—á–Ω–æ?* –°–º–æ—Ç—Ä–∏—Ç–µ: –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å —É–º–µ–µ—Ç –µ—Å—Ç—å –ª—é–±—ã–µ `Number`, —Ç–æ –æ–Ω —Ç–æ—á–Ω–æ —Å–ø—Ä–∞–≤–∏—Ç—Å—è –∏ —Å `Int`.

```kotlin
// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–æ–ª—å–∫–æ –ü–†–ò–ù–ò–ú–ê–ï–¢ T (Consumer)
interface Comparable<in T> {
    fun compareTo(other: T): Int
}

fun demo(x: Comparable<Number>) {
    // –ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç —É–º–µ–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ª—é–±—ã–µ –ß–∏—Å–ª–∞...
    // –¢–æ –æ–Ω —É–º–µ–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∏ Double.
    val y: Comparable<Double> = x 
}

```

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å (MutableList)

–ò–∑–º–µ–Ω—è–µ–º—ã–π —Å–ø–∏—Å–æ–∫ `MutableList<T>` –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç, –∏ –æ—Ç–¥–∞–µ—Ç `T`. –¢–∞–º –Ω–µ—Ç –Ω–∏ `in`, –Ω–∏ `out`.
–ü–æ—ç—Ç–æ–º—É `MutableList<String>` **–Ω–µ–ª—å–∑—è** –ø—Ä–∏—Å–≤–æ–∏—Ç—å –≤ `MutableList<Any>`. –ò–Ω–∞—á–µ –≤ —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø–æ–ª–æ–∂–∏—Ç—å `Int` —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É –Ω–∞ `Any`.

---

## 3. Star Projection `*` (–ó–≤–µ–∑–¥–Ω–∞—è –ø—Ä–æ–µ–∫—Ü–∏—è)

–ê–Ω–∞–ª–æ–≥ Java `?` (Raw type –∏–ª–∏ Wildcard).
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –≤–∞–º **–Ω–µ–≤–∞–∂–µ–Ω —Ç–∏–ø** –¥–∂–µ–Ω–µ—Ä–∏–∫–∞.

```kotlin
// –ú—ã –ø—Ä–∏–Ω–∏–º–∞–µ–º —Å–ø–∏—Å–æ–∫ —á–µ–≥–æ —É–≥–æ–¥–Ω–æ
fun printListSize(list: List<*>) {
    // –ú—ã –Ω–µ –º–æ–∂–µ–º –ø–∏—Å–∞—Ç—å –≤ —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ (–∫—Ä–æ–º–µ null)
    // –ú—ã –Ω–µ –∑–Ω–∞–µ–º, –∫–∞–∫–æ–π —Ç–∞–º —Ç–∏–ø, –Ω–æ –º–æ–∂–µ–º –¥–æ—Å—Ç–∞—Ç—å Any?
    val item: Any? = list.get(0)
    println(list.size)
}

```

–û—Ç–ª–∏—á–∏–µ –æ—Ç `Any?`:

* `MutableList<Any?>` ‚Äî —Å–ø–∏—Å–æ–∫, –∫—É–¥–∞ –º–æ–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ.
* `MutableList<*>` ‚Äî —Å–ø–∏—Å–æ–∫ –∫–∞–∫–æ–≥–æ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞, –Ω–æ –º—ã –Ω–µ –∑–Ω–∞–µ–º –∫–∞–∫–æ–≥–æ. –ü–æ—ç—Ç–æ–º—É –∫–ª–∞—Å—Ç—å —Ç—É–¥–∞ –Ω–∏—á–µ–≥–æ –Ω–µ–ª—å–∑—è (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å).

---

## 4. `where` (–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∏–ø–æ–≤)

–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã `T` –Ω–∞—Å–ª–µ–¥–æ–≤–∞–ª—Å—è —Å—Ä–∞–∑—É –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.

```kotlin
fun <T> copyWhenGreater(list: List<T>, threshold: T): List<String>
    where T : CharSequence, // T –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π
          T : Comparable<T> // –ò T –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã–º
{
    return list.filter { it > threshold }.map { it.toString() }
}

```

---

### üí° –†–µ–∑—é–º–µ –¥–ª—è Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

1. **`reified`** ‚Äî –∫–∏–ª–ª–µ—Ä-—Ñ–∏—á–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `inline fun <reified T>`, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å —Ç–∏–ø `T` –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞, –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è, DI).
2. **`List<String>` ‚Äî —ç—Ç–æ `List<Any>**`, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π (`out`).
3. **`MutableList<String>` ‚Äî —ç—Ç–æ –ù–ï `MutableList<Any>**`, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –∏–∑–º–µ–Ω—è–µ–º—ã–π.
4. **Java `? extends**` = Kotlin **`out`**.
5. **Java `? super**` = Kotlin **`in`**.

---

# üü£ –£—Ä–æ–≤–µ–Ω—å 4: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å (–ß–∞—Å—Ç—å 1)

## 1. –ö–æ—Ä—É—Ç–∏–Ω—ã vs –ü–æ—Ç–æ–∫–∏: –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞?

–í Java –ø–æ—Ç–æ–∫ (`Thread`) ‚Äî —ç—Ç–æ –¥–æ—Ä–æ–≥–∞—è —Å—É—â–Ω–æ—Å—Ç—å. –û–Ω –∑–∞–Ω–∏–º–∞–µ—Ç 1-2 –ú–ë –ø–∞–º—è—Ç–∏ —Å—Ç–µ–∫–∞, –∏ –µ–≥–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –≤ –û–°. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å 100 000 –ø–æ—Ç–æ–∫–æ–≤ ‚Äî –≤—ã –ø–æ–ª—É—á–∏—Ç–µ `OutOfMemoryError`.

**–ö–æ—Ä—É—Ç–∏–Ω–∞ (Coroutine)** ‚Äî —ç—Ç–æ *–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –ø–æ—Ç–æ–∫*.

* –û–Ω–∞ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ—Ç–æ–∫—É –û–° (–º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ –æ–¥–Ω–æ–º, –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–º).
* –û–Ω–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –±–∞–π—Ç—ã –ø–∞–º—è—Ç–∏, –∞ –Ω–µ –º–µ–≥–∞–±–∞–π—Ç—ã.
* –í—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞—Ç—å **–º–∏–ª–ª–∏–æ–Ω** –∫–æ—Ä—É—Ç–∏–Ω –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ.

### –ö–ª—é—á–µ–≤–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è: Suspend (–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞)

–ì–ª–∞–≤–Ω–∞—è –º–∞–≥–∏—è Kotlin ‚Äî —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å **–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (suspend)** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, **–Ω–µ –±–ª–æ–∫–∏—Ä—É—è** –ø–æ—Ç–æ–∫, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –ø–æ—Ç–æ–∫ ‚Äî —ç—Ç–æ —Ä–∞–±–æ—á–∏–π –Ω–∞ –∑–∞–≤–æ–¥–µ.

* **Java (Thread.sleep / IO blocking):** –†–∞–±–æ—á–∏–π —Å–∞–¥–∏—Ç—Å—è –Ω–∞ —Å—Ç—É–ª –∏ –∂–¥–µ—Ç 5 —Å–µ–∫—É–Ω–¥, –ø–æ–∫–∞ –¥–µ—Ç–∞–ª—å –æ—Å—Ç—ã–Ω–µ—Ç. –û–Ω –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç, –Ω–æ –∑–∞—Ä–ø–ª–∞—Ç—É (—Ä–µ—Å—É—Ä—Å—ã CPU/RAM) –ø–æ–ª—É—á–∞–µ—Ç.
* **Kotlin (delay / suspend):** –†–∞–±–æ—á–∏–π –≤–µ—à–∞–µ—Ç –Ω–∞ –¥–µ—Ç–∞–ª—å —Ç–∞–π–º–µ—Ä, –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç –µ—ë –≤ —Å—Ç–æ—Ä–æ–Ω—É –∏ **—Ç—É—Ç –∂–µ –±–µ—Ä–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –∑–∞–¥–∞—á—É**. –ö–æ–≥–¥–∞ —Ç–∞–π–º–µ—Ä —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –æ–Ω –≤–µ—Ä–Ω–µ—Ç—Å—è –∫ –ø–µ—Ä–≤–æ–π –¥–µ—Ç–∞–ª–∏.

---

## 2. –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ `suspend`

–ß—Ç–æ–±—ã —Ñ—É–Ω–∫—Ü–∏—è –º–æ–≥–ª–∞ "–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è", –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º `suspend`.

```kotlin
// –û–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
fun regularFunction() {
    // Thread.sleep(1000) // –ü–õ–û–•–û: –≠—Ç–æ –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø–æ—Ç–æ–∫!
}

// Suspend —Ñ—É–Ω–∫—Ü–∏—è
suspend fun downloadData(): String {
    // delay - —ç—Ç–æ "–Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π —Å–æ–Ω"
    delay(1000) 
    return "Data"
}

```

**–ü—Ä–∞–≤–∏–ª–æ:** `suspend` —Ñ—É–Ω–∫—Ü–∏—é –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ** –∏–∑ –¥—Ä—É–≥–æ–π `suspend` —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –∏–∑ **–∫–æ—Ä—É—Ç–∏–Ω—ã**. –ò–∑ –æ–±—ã—á–Ω–æ–≥–æ Java-–º–µ—Ç–æ–¥–∞ –µ—ë –≤—ã–∑–≤–∞—Ç—å –Ω–µ–ª—å–∑—è (–±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ö–∞–∫–æ–≤).

---

## 3. –ó–∞–ø—É—Å–∫ –∫–æ—Ä—É—Ç–∏–Ω: Builders

–ú—ã –Ω–µ –º–æ–∂–µ–º –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–≤–∞—Ç—å `downloadData()` –∏–∑ `main`. –ù–∞–º –Ω—É–∂–µ–Ω –º–æ—Å—Ç –º–µ–∂–¥—É –æ–±—ã—á–Ω—ã–º –º–∏—Ä–æ–º –∏ –º–∏—Ä–æ–º –∫–æ—Ä—É—Ç–∏–Ω. –≠—Ç–æ –¥–µ–ª–∞—é—Ç **Coroutines Builders**.

### `runBlocking` (–ú–æ—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏ main)

–ë–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ (–∫–∞–∫ –≤ Java), –ø–æ–∫–∞ –≤—Å–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –≤–Ω—É—Ç—Ä–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è. –í —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ (Backend/Android) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—Ä–∞–π–Ω–µ —Ä–µ–¥–∫–æ, –Ω–æ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ ‚Äî —ç—Ç–æ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞.

```kotlin
import kotlinx.coroutines.*

fun main() = runBlocking { // this: CoroutineScope
    println("Start: ${Thread.currentThread().name}")

    // –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ—Ä—É—Ç–∏–Ω—É
    launch {
        // –ò–º–∏—Ç–∏—Ä—É–µ–º —Ä–∞–±–æ—Ç—É 1 —Å–µ–∫
        delay(1000) 
        println("World! : ${Thread.currentThread().name}")
    }

    println("Hello,")
    // runBlocking –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è launch –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º
}

/* –í—ã–≤–æ–¥:
Start: main
Hello,
(–ø–∞—É–∑–∞ 1 —Å–µ–∫)
World! : main
*/

```

*–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –í—Å—ë –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –û–î–ù–û–ú –ø–æ—Ç–æ–∫–µ main, –Ω–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ! –ü–æ–∫–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞ "—Å–ø–∞–ª–∞" (delay), –ø–æ—Ç–æ–∫ –ø–æ—à–µ–ª –¥–∞–ª—å—à–µ –∏ –Ω–∞–ø–µ—á–∞—Ç–∞–ª "Hello,".*

### `launch` (Fire and Forget)

–ê–Ω–∞–ª–æ–≥ `executor.execute(Runnable)`.

* –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É –∏ —Å—Ä–∞–∑—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.
* –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç `Job` (–º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É).
* –ù–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Job`).

```kotlin
val job = scope.launch {
    // –î–µ–ª–∞–µ–º —á—Ç–æ-—Ç–æ –¥–æ–ª–≥–æ–µ
    processImage()
}
// job.cancel() // –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ

```

---

## 4. Structured Concurrency (–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å)

–í Java, –µ—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ—Ç–æ–∫ –∏ –ø–æ—Ç–µ—Ä—è–µ—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–µ–≥–æ, –æ–Ω –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–µ—á–Ω–æ (—É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏), –¥–∞–∂–µ –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–∫—Ç —É–º–µ—Ä.

–í Kotlin –≤–≤–µ–¥–µ–Ω–∞ **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å**.
**–ü—Ä–∞–≤–∏–ª–æ:** –ö–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–∞ "–≤ –≤–∞–∫—É—É–º–µ". –û–Ω–∞ –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–∞ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∫–æ–π-—Ç–æ **–û–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (`CoroutineScope`)**.

* –ï—Å–ª–∏ —É–º–∏—Ä–∞–µ—Ç –†–æ–¥–∏—Ç–µ–ª—å (`Scope`), —Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –≤—Å–µ –î–µ—Ç–∏ (`Coroutines`).
* –†–æ–¥–∏—Ç–µ–ª—å –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –∑–∞–≤–µ—Ä—à–∞—Ç—Å—è –≤—Å–µ –µ–≥–æ –î–µ—Ç–∏.

```kotlin
fun main() = runBlocking {
    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏
    launch { 
        println("Parent started")
        
        // –í–ª–æ–∂–µ–Ω–Ω–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞ (Child)
        launch {
            delay(2000)
            println("Child 1 finished")
        }
        
        launch {
            delay(1000)
            println("Child 2 finished")
        }
        
        println("Parent logic finished")
    }
    println("Main finished")
}

```

–î–∞–∂–µ –µ—Å–ª–∏ "Parent logic finished" –Ω–∞–ø–µ—á–∞—Ç–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ, –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∑–∞–∫—Ä–æ–µ—Ç—Å—è, –ø–æ–∫–∞ `Child 1` –∏ `Child 2` –Ω–µ –¥–æ—Ä–∞–±–æ—Ç–∞—é—Ç. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫.

---

## 5. Under the Hood (–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±–∞–π—Ç-–∫–æ–¥–µ?)

–ö–∞–∫ Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É, –≤–∞–º –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ: –∫–∞–∫ JVM –≤—ã–ø–æ–ª–Ω—è–µ—Ç `suspend`, –µ—Å–ª–∏ –≤ –±–∞–π—Ç-–∫–æ–¥–µ –Ω–µ—Ç —Ç–∞–∫–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏?

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä Kotlin –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç `suspend` —Ñ—É–Ω–∫—Ü–∏–∏ –≤ **State Machine (–ö–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç)**.
–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **CPS (Continuation Passing Style)**.

–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥:

```kotlin
suspend fun task() {
    print("A")
    delay(1000) // –¢–æ—á–∫–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ 1
    print("B")
    delay(1000) // –¢–æ—á–∫–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ 2
    print("C")
}

```

–í–æ —á—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ —ç—Ç–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è (–ø—Å–µ–≤–¥–æ–∫–æ–¥):

```java
void task(Continuation cont) {
    switch (cont.label) {
        case 0:
            print("A");
            cont.label = 1;
            // delay –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç–∫—É "COROUTINE_SUSPENDED"
            if (DelayKt.delay(1000, cont) == SUSPENDED) return; 
            // –§—É–Ω–∫—Ü–∏—è –†–ï–ê–õ–¨–ù–û –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è (return), —Å—Ç–µ–∫ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è!
            
        case 1:
            // –°–ø—É—Å—Ç—è 1 —Å–µ–∫, —Å–∏—Å—Ç–µ–º–∞ –≤—ã–∑—ã–≤–∞–µ—Ç task() —Å–Ω–æ–≤–∞, –Ω–æ —Å label=1
            print("B");
            cont.label = 2;
            if (DelayKt.delay(1000, cont) == SUSPENDED) return;
            
        case 2:
            print("C");
            return;
    }
}

```

**–°—É—Ç—å:** –ö–æ–≥–¥–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ `delay`, —Ñ—É–Ω–∫—Ü–∏—è `task` —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è (`return`). –ü–æ—Ç–æ–∫ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö –¥–µ–ª. –ê —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É —Ç–∞–π–º–µ—Ä –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç—É –∂–µ —Ñ—É–Ω–∫—Ü–∏—é —Å–Ω–æ–≤–∞, –Ω–æ –ø—Ä—ã–≥–∞–µ—Ç —Å—Ä–∞–∑—É –Ω–∞ `case 1`.

---

### üí° –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å–∏–ª—ã (100k Coroutines)

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–¥. –í Java –æ–Ω –±—ã —É–±–∏–ª JVM. –í Kotlin —ç—Ç–æ –∑–∞–π–º–µ—Ç —Å–µ–∫—É–Ω–¥—É.

```kotlin
import kotlinx.coroutines.*
import kotlin.system.measureTimeMillis

fun main() = runBlocking {
    val time = measureTimeMillis {
        val jobs = List(100_000) { // –°–æ–∑–¥–∞–µ–º –ª–∏—Å—Ç –∏–∑ 100 000 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            launch {
                delay(1000) // –ö–∞–∂–¥–∞—è –∂–¥–µ—Ç 1 —Å–µ–∫—É–Ω–¥—É
                print(".")
            }
        }
        // joinAll() –Ω–µ –Ω—É–∂–µ–Ω, —Ç–∞–∫ –∫–∞–∫ runBlocking –∂–¥–µ—Ç –≤—Å–µ—Ö –¥–µ—Ç–µ–π
    }
    println("\nCompleted in $time ms")
}

```

–í—ã —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ —ç—Ç–æ –∑–∞–π–º–µ—Ç ~1100 –º—Å. 100 000 "–ø–æ—Ç–æ–∫–æ–≤" –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ –æ–≤–µ—Ä—Ö–µ–¥–∞.

---

**–†–µ–∑—é–º–µ –ß–∞—Å—Ç–∏ 1:**

1. **–ö–æ—Ä—É—Ç–∏–Ω—ã** ‚Äî —ç—Ç–æ –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å—Ç–∞–≤–∏—Ç—å—Å—è –Ω–∞ –ø–∞—É–∑—É, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –ø–æ—Ç–æ–∫.
2. **`suspend`** ‚Äî –º–∞—Ä–∫–µ—Ä —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
3. **`launch`** ‚Äî –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏ ("–≤—ã—Å—Ç—Ä–µ–ª–∏–ª –∏ –∑–∞–±—ã–ª").
4. **Structured Concurrency** ‚Äî –∫–æ—Ä—É—Ç–∏–Ω—ã –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ Scope.

---

# üü£ –£—Ä–æ–≤–µ–Ω—å 4: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å (–ß–∞—Å—Ç—å 2)

## 1. Dispatchers: –ù–∞ –∫–∞–∫–æ–º –ø–æ—Ç–æ–∫–µ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º?

–í Java –≤—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ `ThreadPoolExecutor` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `ForkJoinPool`. –í Kotlin –ø—É–ª—ã –ø–æ—Ç–æ–∫–æ–≤ —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞ –≤–∞—Å. –û–Ω–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è **–î–∏—Å–ø–µ—Ç—á–µ—Ä—ã**.

–ú—ã —É–∫–∞–∑—ã–≤–∞–µ–º –¥–∏—Å–ø–µ—Ç—á–µ—Ä –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ—Ä—É—Ç–∏–Ω—ã (`launch(Dispatchers.IO)`) –∏–ª–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–∏–¥—ã –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–≤:

| –î–∏—Å–ø–µ—Ç—á–µ—Ä | –ê–Ω–∞–ª–æ–≥ –≤ Java | –î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å? |
| --- | --- | --- |
| **`Dispatchers.Main`** | Android Main Looper / JavaFX / Swing Thread | **–¢–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–∞ —Å UI.** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, –∞–Ω–∏–º–∞—Ü–∏–∏. –ù–∞ –ë—ç–∫–µ–Ω–¥–µ –æ–±—ã—á–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. |
| **`Dispatchers.IO`** | `CachedThreadPool` (–±–µ–∑–ª–∏–º–∏—Ç–Ω—ã–π, —Ä–∞—Å—Ç–µ—Ç –ø–æ –Ω—É–∂–¥–µ) | **–í–≤–æ–¥-–≤—ã–≤–æ–¥.** –°–µ—Ç—å, –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤. –í–º–µ—â–∞–µ—Ç 64+ –ø–æ—Ç–æ–∫–æ–≤. |
| **`Dispatchers.Default`** | `ForkJoinPool` (—Ä–∞–∑–º–µ—Ä = –∫–æ–ª-–≤–æ —è–¥–µ—Ä CPU) | **–¢—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.** JSON –ø–∞—Ä—Å–∏–Ω–≥, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–ø–∏—Å–∫–æ–≤, –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è. |
| **`Dispatchers.Unconfined`** | –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞ | "–ì–¥–µ –ø—Ä–∏–¥–µ—Ç—Å—è". –°—Ç–∞—Ä—Ç—É–µ—Ç –Ω–∞ —Ç–µ–∫—É—â–µ–º –ø–æ—Ç–æ–∫–µ, –ø–æ—Å–ª–µ `suspend` –º–æ–∂–µ—Ç –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–æ–º. –†–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ. |

---

## 2. `withContext`: –≠–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ

–í Java/Android –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–æ–≤ —á–∞—Å—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –∞–¥ ("Callback Hell"):

```java
// Java Style (Pseudo-code)
executor.execute(() -> {
    Data data = database.load(); // –§–æ–Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫
    runOnUiThread(() -> {
        show(data); // –ì–ª–∞–≤–Ω—ã–π –ø–æ—Ç–æ–∫
    });
});

```

–í Kotlin –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é **`withContext`**. –û–Ω–∞:

1. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –¥–∏—Å–ø–µ—Ç—á–µ—Ä.
2. –í—ã–ø–æ–ª–Ω—è–µ—Ç –±–ª–æ–∫ –∫–æ–¥–∞.
3. **–ü—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç** –≤–Ω–µ—à–Ω—é—é –∫–æ—Ä—É—Ç–∏–Ω—É, –ø–æ–∫–∞ –±–ª–æ–∫ –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è.
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è** –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –¥–∏—Å–ø–µ—Ç—á–µ—Ä.

```kotlin
suspend fun loadAndShowData() {
    // 1. –ú—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ Main –ø–æ—Ç–æ–∫–µ
    showProgressBar()

    // 2. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ IO –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
    // –í–Ω–µ—à–Ω–∏–π –∫–æ–¥ –ñ–î–ï–¢ (suspend), –Ω–æ –ø–æ—Ç–æ–∫ UI –ù–ï –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù
    val data = withContext(Dispatchers.IO) {
        println("Loading on: ${Thread.currentThread().name}")
        // –ò–º–∏—Ç–∞—Ü–∏—è —Ç—è–∂–µ–ª–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ –ë–î
        Thread.sleep(1000) // –¢—É—Ç –º–æ–∂–Ω–æ –¥–∞–∂–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–æ–∫, —ç—Ç–æ IO-–¥–∏—Å–ø–µ—Ç—á–µ—Ä
        "My Data" // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    }

    // 3. –ú—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—É–ª–∏—Å—å –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –ø–æ—Ç–æ–∫ (Main)
    println("Back on: ${Thread.currentThread().name}")
    showData(data)
}

```

**–ò—Ç–æ–≥:** –õ–∏–Ω–µ–π–Ω—ã–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä—ã–≥–∞–µ—Ç –ø–æ –ø–æ—Ç–æ–∫–∞–º, –Ω–æ —á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π.

---

## 3. `async` & `await`: –ü–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º

`launch` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Job` (–ø—Ä–æ—Å—Ç–æ "—Ä—É—á–∫–∞" –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è). –ê —á—Ç–æ, –µ—Å–ª–∏ –Ω–∞–º –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–∞–∫ `Future` –∏–ª–∏ `Callable` –≤ Java?

–î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –±–∏–ª–¥–µ—Ä **`async`**.

* –û–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É.
* –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç **`Deferred<T>`** (–ê–Ω–∞–ª–æ–≥ `CompletableFuture<T>`).
* –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `.await()`.

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ vs –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

–î–æ–ø—É—Å—Ç–∏–º, –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –µ–≥–æ —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π. –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –¥–ª–∏—Ç—Å—è 1 —Å–µ–∫.

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–ü–ª–æ—Ö–æ)**

```kotlin
val time = measureTimeMillis {
    val user = fetchUser() // –∂–¥–µ–º 1 —Å–µ–∫
    val friends = fetchFriends() // –∂–¥–µ–º 1 —Å–µ–∫
} 
// –ò—Ç–æ–≥–æ: 2 —Å–µ–∫—É–Ω–¥—ã

```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å `async` (–•–æ—Ä–æ—à–æ)**

```kotlin
fun main() = runBlocking {
    val time = measureTimeMillis {
        // –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–µ –∑–∞–¥–∞—á–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
        // Deferred<String>
        val userDeferred = async(Dispatchers.IO) { fetchUser() } 
        // Deferred<List<String>>
        val friendsDeferred = async(Dispatchers.IO) { fetchFriends() }

        // –ö–æ–¥ –∏–¥–µ—Ç –¥–∞–ª—å—à–µ... –∑–∞–¥–∞—á–∏ —É–∂–µ –∫—Ä—É—Ç—è—Ç—Å—è...

        // –í —ç—Ç–æ–π —Ç–æ—á–∫–µ –Ω–∞–º –Ω—É–∂–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –ñ–¥–µ–º (suspend).
        val user = userDeferred.await()
        val friends = friendsDeferred.await()
        
        println("User: $user, Friends: $friends")
    }
    println("Time: $time ms") // –ò—Ç–æ–≥–æ: ~1000 –º—Å (—Å–∞–º–∞—è –¥–ª–∏–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞)
}

suspend fun fetchUser(): String { delay(1000); return "Alex" }
suspend fun fetchFriends(): List<String> { delay(1000); return listOf("Bob", "Alice") }

```

### ‚ö†Ô∏è –ß–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞ –Ω–æ–≤–∏—á–∫–æ–≤

```kotlin
// –¢–ê–ö –ü–ê–†–ê–õ–õ–ï–õ–¨–ù–û–°–¢–ò –ù–ï –ë–£–î–ï–¢:
val user = async { fetchUser() }.await() // –ó–∞–ø—É—Å—Ç–∏–ª–∏ –∏ —Å—Ä–∞–∑—É –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å
val friends = async { fetchFriends() }.await() // –ñ–¥–µ–º –ø–æ–∫–∞ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è –ø–µ—Ä–≤—ã–π

```

---

## 4. CoroutineContext: –ú–∞–≥–∏—è –ø–ª—é—Å–∞ `+`

–í—ã –≤–∏–¥–µ–ª–∏, —á—Ç–æ –º—ã –ø–∏—à–µ–º `launch(Dispatchers.IO)`. –ù–æ –∏–Ω–æ–≥–¥–∞ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å:
`launch(Dispatchers.IO + CoroutineName("MyWorker") + Job())`.

**CoroutineContext** ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ Map (–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ).
–û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:

1. **Dispatcher:** *–ì–¥–µ* –≤—ã–ø–æ–ª–Ω—è—Ç—å (`Dispatchers.IO`).
2. **Job:** *–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ* –∂–∏–∑–Ω—å—é (—Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–∞–º—É –∑–∞–¥–∞—á—É).
3. **CoroutineName:** *–ò–º—è* –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–ø–æ–ª–µ–∑–Ω–æ –≤ –ª–æ–≥–∞—Ö).
4. **CoroutineExceptionHandler:** *–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫* (–∞–Ω–∞–ª–æ–≥ `Thread.UncaughtExceptionHandler`).

–û–ø–µ—Ä–∞—Ç–æ—Ä `+` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—è –¥—É–±–ª–∏–∫–∞—Ç—ã.

```kotlin
val scope = CoroutineScope(Dispatchers.Main + Job())

scope.launch(Dispatchers.IO + CoroutineName("BackgroundLoad")) {
    // –ó–¥–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç:
    // Dispatcher: IO (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏–ª Main)
    // Job: –ù–æ–≤—ã–π –¥–æ—á–µ—Ä–Ω–∏–π Job (—Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ launch'–µ–º)
    // Name: BackgroundLoad
}

```

---

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç: ViewModelScope (Android)

–ï—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ –ø–æ–¥ Android, –≤–∞–º —Ä–µ–¥–∫–æ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å Scope —Ä—É–∫–∞–º–∏.
–í `ViewModel` –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π `viewModelScope`.

```kotlin
class MyViewModel : ViewModel() {
    fun loadData() {
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω–∏—Ç—Å—è, –µ—Å–ª–∏ —ç–∫—Ä–∞–Ω –∑–∞–∫—Ä–æ–µ—Ç—Å—è!
        viewModelScope.launch {
            try {
                val data = api.getData() // suspend –≤—ã–∑–æ–≤ (Retrofit)
                _liveData.value = data
            } catch (e: Exception) {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ try-catch —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∫–æ—Ä—É—Ç–∏–Ω!
                showError(e)
            }
        }
    }
}

```

*–ó–∞–º–µ—Ç—å—Ç–µ: Retrofit (–Ω–∞—á–∏–Ω–∞—è —Å 2.6.0) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `suspend` —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Å–∞–º –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ IO-–ø–æ—Ç–æ–∫ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º, —Ç–∞–∫ —á—Ç–æ `withContext` –ø–∏—Å–∞—Ç—å –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.*

---

**–†–µ–∑—é–º–µ –ß–∞—Å—Ç–∏ 2:**

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **`Dispatchers.IO`** –¥–ª—è —Å–µ—Ç–∏/–ë–î –∏ **`Dispatchers.Default`** –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π.
2. **`withContext`** ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–º–µ–Ω–∏—Ç—å –ø–æ—Ç–æ–∫ –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.
3. **`async`** –∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–¥–∞—á—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Deferred`. –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å `await()`.

---

# üü£ –£—Ä–æ–≤–µ–Ω—å 4: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å (–ß–∞—Å—Ç—å 3) ‚Äî Kotlin Flow

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Flow? (Cold Streams)

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ –∫—Ä–∞–Ω —Å –≤–æ–¥–æ–π.

* **List:** –≠—Ç–æ –≤–µ–¥—Ä–æ –≤–æ–¥—ã. –î–∞–Ω–Ω—ã–µ —É–∂–µ –≤—ã—á–∏—Å–ª–µ–Ω—ã –∏ –ª–µ–∂–∞—Ç –≤ –ø–∞–º—è—Ç–∏.
* **Flow:** –≠—Ç–æ —Ç—Ä—É–±–∞. –í–æ–¥–∞ (–¥–∞–Ω–Ω—ã–µ) —Ç–µ—á–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –≤—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ –∫—Ä–∞–Ω (`collect`).

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç RxJava, –≥–¥–µ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –ø—Ä–æ `subscribeOn/observeOn` –∏ `Disposable`, Flow –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –±–∞–∑–µ –∫–æ—Ä—É—Ç–∏–Ω –∏ **Structured Concurrency**.

### –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä:

```kotlin
import kotlinx.coroutines.flow.*
import kotlinx.coroutines.*

// –§—É–Ω–∫—Ü–∏—è –Ω–µ suspend! –û–Ω–∞ –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ—Ç–æ–∫–∞.
fun simpleFlow(): Flow<Int> = flow {
    println("Flow started")
    for (i in 1..3) {
        delay(100) // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–∞—É–∑–∞ (–∏–º–∏—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã)
        emit(i)    // –≠–º–∏—Å—Å–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–æ—Ç–æ–∫
    }
}

fun main() = runBlocking {
    val myFlow = simpleFlow()
    
    println("Calling collect...")
    // –ü–æ—Ç–æ–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –∑–¥–µ—Å—å (Cold stream)
    myFlow.collect { value -> 
        println(value) 
    }
    
    println("Calling collect again...")
    // –ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑, –ø–æ—Ç–æ–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å –Ω—É–ª—è
    myFlow.collect { value -> println(value) }
}

```

---

## 2. –û–ø–µ—Ä–∞—Ç–æ—Ä—ã (–ö–∞–∫ Collections, —Ç–æ–ª—å–∫–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)

Flow –∏–º–µ–µ—Ç –±–æ–≥–∞—Ç—ã–π –Ω–∞–±–æ—Ä –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (`map`, `filter`, `take`, `zip`), –∫–æ—Ç–æ—Ä—ã–µ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –∫–æ–ª–ª–µ–∫—Ü–∏—è–º–∏. –ì–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ ‚Äî –≤–Ω—É—Ç—Ä–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `suspend` —Ñ—É–Ω–∫—Ü–∏–∏!

```kotlin
suspend fun performRequest(i: Int): String {
    delay(100)
    return "Response $i"
}

fun main() = runBlocking {
    (1..5).asFlow() // –ü—Ä–µ–≤—Ä–∞—â–∞–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω –≤ Flow
        .filter { it % 2 == 0 } // –û—Å—Ç–∞–≤–ª—è–µ–º —á–µ—Ç–Ω—ã–µ (2, 4)
        .map { 
            // –í–Ω—É—Ç—Ä–∏ map –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã!
            performRequest(it) 
        }
        .collect { response ->
            println(response)
        }
}

```

### `flowOn` (–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)

–í RxJava –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `subscribeOn`. –í Flow –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `flowOn`. –û–Ω –º–µ–Ω—è–µ—Ç –¥–∏—Å–ø–µ—Ç—á–µ—Ä –¥–ª—è –≤—Å–µ–≥–æ, —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è **–≤—ã—à–µ** –Ω–µ–≥–æ –ø–æ —Ü–µ–ø–æ—á–∫–µ.

```kotlin
flow {
    // –¢—è–∂–µ–ª–∞—è —Ä–∞–±–æ—Ç–∞ (–∑–∞–≥—Ä—É–∑–∫–∞ –ë–î)
    emit(loadData()) 
}
.flowOn(Dispatchers.IO) // <-- –í–µ—Å—å –∫–æ–¥ –≤—ã—à–µ (flow block) –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –Ω–∞ IO
.map { process(it) }    // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è –Ω–∞ Default (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–º –µ—â–µ flowOn)
.collect { updateUi(it) } // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è –Ω–∞ Main (—Ç–∞–º, –≥–¥–µ –≤—ã–∑–≤–∞–ª–∏ collect)

```

---

## 3. Hot Streams: `StateFlow` –∏ `SharedFlow`

–û–±—ã—á–Ω—ã–π `Flow` ‚Äî —Ö–æ–ª–æ–¥–Ω—ã–π (cold). –ù–µ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ ‚Äî –Ω–µ—Ç —Ä–∞–±–æ—Ç—ã.
–ù–æ –≤ UI (Android/Web) –Ω–∞–º —á–∞—Å—Ç–æ –Ω—É–∂–Ω—ã "–≥–æ—Ä—è—á–∏–µ" –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤.

### `StateFlow` (–ê–Ω–∞–ª–æ–≥ LiveData / BehaviorSubject)

–≠—Ç–æ –ø–æ—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–π **–≤—Å–µ–≥–¥–∞ —Ö—Ä–∞–Ω–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**.
–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —ç–∫—Ä–∞–Ω–∞ (MVI/MVVM).

* –í—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
* –ü—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ —Å—Ä–∞–∑—É –æ—Ç–¥–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.
* **Conflation:** –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ, –ø–æ–¥–ø–∏—Å—á–∏–∫ –ø–æ–ª—É—á–∏—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º–æ–µ –ø–æ—Å–ª–µ–¥–Ω–µ–µ (–ø—Ä–æ–ø—É—Å—Ç–∏—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ).

```kotlin
class MainViewModel {
    // Private mutable (–º–æ–∂–µ–º –º–µ–Ω—è—Ç—å –≤–Ω—É—Ç—Ä–∏)
    private val _uiState = MutableStateFlow("Loading")
    
    // Public immutable (—Å–Ω–∞—Ä—É–∂–∏ —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ–º)
    val uiState: StateFlow<String> = _uiState.asStateFlow()

    fun updateData() {
        _uiState.value = "Success" // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    }
}

// –í UI (Android Activity / Compose)
fun setup() {
    lifecycleScope.launch {
        viewModel.uiState.collect { state ->
            // –°—Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É –ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ ("Loading")
            // –ò –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
            render(state)
        }
    }
}

```

### `SharedFlow` (–ê–Ω–∞–ª–æ–≥ PublishSubject)

–≠—Ç–æ –ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è "—Ä–∞–∑–æ–≤—ã—Ö" —ç—Ñ—Ñ–µ–∫—Ç–æ–≤: –ø–æ–∫–∞–∑–∞—Ç—å Toast, –Ω–∞–≤–∏–≥–∞—Ü–∏—è, —Å–Ω–µ–∫–±–∞—Ä.

* –ù–µ –∏–º–µ–µ—Ç –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
* –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –±—É—Ñ–µ—Ä –∏ replay (—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞—Ä—ã—Ö —Å–æ–±—ã—Ç–∏–π –æ—Ç–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º).
* –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –Ω–µ—Ç, —Å–æ–±—ã—Ç–∏–µ –º–æ–∂–µ—Ç —É–π—Ç–∏ "–≤ –Ω–∏–∫—É–¥–∞" (–∏–ª–∏ –æ—Å—Ç–∞—Ç—å—Å—è –≤ –±—É—Ñ–µ—Ä–µ).

```kotlin
val events = MutableSharedFlow<String>()

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è (suspend —Ñ—É–Ω–∫—Ü–∏—è, —Ç.–∫. –±—É—Ñ–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω)
events.emit("Click detected")

```

---

## 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í Flow –Ω–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–ª–±—ç–∫–∏ `onError`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—ã–π `try-catch` –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã –∏–ª–∏ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä `catch`.

**–í–∞—Ä–∏–∞–Ω—Ç 1 (–ò–º–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π):**

```kotlin
try {
    myFlow.collect { println(it) }
} catch (e: Exception) {
    println("Caught $e")
}

```

**–í–∞—Ä–∏–∞–Ω—Ç 2 (–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π):**

```kotlin
myFlow
    .map { check(it > 0); it }
    .catch { e -> 
        emit(-1) // –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤—ã–¥–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
        // –∏–ª–∏ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å
    }
    .collect { println(it) }

```

---

## üí° RxJava vs Kotlin Flow

–ï—Å–ª–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ RxJava, –≤–æ—Ç —Å–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–∞:

| RxJava | Kotlin Flow | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
| --- | --- | --- |
| `Single` | `suspend fun` | –û–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ |
| `Observable` / `Flowable` | `Flow` | –•–æ–ª–æ–¥–Ω—ã–π –ø–æ—Ç–æ–∫ |
| `BehaviorSubject` | `StateFlow` | –•—Ä–∞–Ω–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ |
| `PublishSubject` | `SharedFlow` | –¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è —Å–æ–±—ã—Ç–∏–π |
| `map`, `filter`, `flatMap` | `map`, `filter`, `flatMapConcat` | –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –ø–æ—á—Ç–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã |
| `subscribeOn` | `flowOn` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏ |
| `dispose()` | `job.cancel()` | –û—Ç–º–µ–Ω–∞ —á–µ—Ä–µ–∑ Scope –∫–æ—Ä—É—Ç–∏–Ω—ã |

**–ü–æ—á–µ–º—É Flow –ø–æ–±–µ–∂–¥–∞–µ—Ç?**

1. **Simplicity:** –ù–µ—Ç –º–æ–Ω—Å—Ç—Ä–æ–≤ —Ç–∏–ø–∞ `Single<List<Maybe<T>>>`.
2. **Suspend:** –í–Ω—É—Ç—Ä–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ Flow –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å `delay`, –≤—ã–∑—ã–≤–∞—Ç—å –ë–î –∏ —Ç.–¥. –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫. –í RxJava –≤–Ω—É—Ç—Ä–∏ `map` –Ω–µ–ª—å–∑—è –≤—ã–∑–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫.
3. **Structured Concurrency:** Flow —É–º–∏—Ä–∞–µ—Ç –≤–º–µ—Å—Ç–µ —Å —ç–∫—Ä–∞–Ω–æ–º (Scope) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ù–∏–∫–∞–∫–∏—Ö —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –∏–∑-–∑–∞ –∑–∞–±—ã—Ç–æ–≥–æ `dispose()`.

---

**–†–µ–∑—é–º–µ –£—Ä–æ–≤–Ω—è 4:**
–í—ã —Ç–µ–ø–µ—Ä—å –≤–ª–∞–¥–µ–µ—Ç–µ –ø–æ–ª–Ω—ã–º –∞—Ä—Å–µ–Ω–∞–ª–æ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏:

1. **Coroutines** –¥–ª—è —Ä–∞–∑–æ–≤—ã—Ö –∑–∞–¥–∞—á.
2. **Dispatchers** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞–º–∏.
3. **Flow** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.

---

# ‚ö´ –£—Ä–æ–≤–µ–Ω—å 5: Expert (–ß–∞—Å—Ç—å 1) ‚Äî Reflection & Interop

## 1. Reflection API: `KClass` vs `Class`

–í Java —Ä–µ—Ñ–ª–µ–∫—Å–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ `rt.jar`. –í Kotlin, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑–¥—É–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–æ—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è Android), –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É `kotlin-reflect.jar`.

–ë–µ–∑ —ç—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤—ã –º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –≤–µ—â–∏ (–ø–æ–ª—É—á–∏—Ç—å –∏–º—è –∫–ª–∞—Å—Å–∞), –Ω–æ –Ω–µ —Å–º–æ–∂–µ—Ç–µ –∏–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞ –∏–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –ø–æ –∏–º–µ–Ω–∏.

### KClass vs Java Class

–≠—Ç–æ —Å–∞–º—ã–π —á–∞—Å—Ç—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—É—Ç–∞–Ω–∏—Ü—ã.

* **`java.lang.Class`**: –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–ª–∞—Å—Å Java. –ù—É–∂–µ–Ω –¥–ª—è Gson, Jackson, Spring.
* **`kotlin.reflect.KClass`**: –≠—Ç–æ –º–µ—Ç–∞-–æ–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ Kotlin. –û–Ω–æ –∑–Ω–∞–µ—Ç –ø—Ä–æ `val`/`var`, `data class`, `nullability` –∏ `suspend`.

```kotlin
// 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ KClass (Kotlin)
val kClass: KClass<User> = User::class

// 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ Class (Java)
// .java - —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–æ-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
val jClass: Class<User> = User::class.java 

// 3. –û–±—Ä–∞—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (—Ç—Ä–µ–±—É–µ—Ç kotlin-reflect)
val kClassBack: KClass<User> = jClass.kotlin

```

### –ü—Ä–∞–∫—Ç–∏–∫–∞: –î–æ—Å—Ç—É–ø –∫ —Å–≤–æ–π—Å—Ç–≤–∞–º —á–µ—Ä–µ–∑ —Ä–µ—Ñ–ª–µ–∫—Å–∏—é

–î–æ–ø—É—Å—Ç–∏–º, –Ω–∞–º –Ω—É–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞, –∑–Ω–∞—è —Ç–æ–ª—å–∫–æ –µ–≥–æ –∏–º—è —Å—Ç—Ä–æ–∫–æ–π (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –¥–æ—Å—Ç—É–ø).

```kotlin
import kotlin.reflect.full.memberProperties

data class User(val name: String, var age: Int)

fun printProperty(instance: Any, propName: String) {
    // –ü–æ–ª—É—á–∞–µ–º KClass
    val kClass = instance::class 
    
    // –ò—â–µ–º —Å–≤–æ–π—Å—Ç–≤–æ –ø–æ –∏–º–µ–Ω–∏ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ memberProperties
    val prop = kClass.memberProperties.find { it.name == propName }
    
    if (prop != null) {
        // getter –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ call
        println("Value: ${prop.getter.call(instance)}") 
    } else {
        println("Property not found")
    }
}

```

---

## 2. Java Interop: –î–µ–ª–∞–µ–º –∫–æ–¥ –∫—Ä–∞—Å–∏–≤—ã–º –¥–ª—è Java

Kotlin –æ—Ç–ª–∏—á–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç Java. –ê –≤–æ—Ç Java –≤—ã–∑—ã–≤–∞–µ—Ç Kotlin –∏–Ω–æ–≥–¥–∞ "–∫—Ä–∏–≤–æ". –ß—Ç–æ–±—ã –≤–∞—à Kotlin-–∫–æ–¥ –≤—ã–≥–ª—è–¥–µ–ª –≤ Java –∫–∞–∫ —Ä–æ–¥–Ω–æ–π, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **JVM –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏**.

### `@JvmStatic`: –ù–∞—Å—Ç–æ—è—â–∞—è —Å—Ç–∞—Ç–∏–∫–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–µ—Ç–æ–¥—ã –≤ `object` –∏–ª–∏ `companion object` –Ω–µ —è–≤–ª—è—é—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –≤ –±–∞–π—Ç-–∫–æ–¥–µ. –≠—Ç–æ –º–µ—Ç–æ–¥—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞ `INSTANCE`.

**Kotlin:**

```kotlin
object Utils {
    fun doMagic() {}
}

```

**Java (–ë–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ - –£—Ä–æ–¥–ª–∏–≤–æ):**

```java
Utils.INSTANCE.doMagic();

```

**–†–µ—à–µ–Ω–∏–µ:**

```kotlin
object Utils {
    @JvmStatic // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π static –º–µ—Ç–æ–¥ –≤ –±–∞–π—Ç-–∫–æ–¥–µ
    fun doMagic() {}
}

```

**Java (–° –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π - –ö—Ä–∞—Å–∏–≤–æ):**

```java
Utils.doMagic();

```

---

### `@JvmOverloads`: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –∏ –º–µ—Ç–æ–¥—ã

Kotlin –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. Java ‚Äî –Ω–µ—Ç.
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Kotlin –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–ª—è Java —Ç–æ–ª—å–∫–æ **–æ–¥–∏–Ω** –º–µ—Ç–æ–¥ —Å–æ –≤—Å–µ–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏.

**Kotlin:**

```kotlin
class MyView @JvmOverloads constructor(
    context: Context, 
    attrs: AttributeSet? = null, 
    defStyle: Int = 0
)

```

**–ß—Ç–æ –≤–∏–¥–∏—Ç Java (–ë–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏):**
–¢–æ–ª—å–∫–æ `MyView(Context, AttributeSet, int)`. –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å –µ–≥–æ —Å –æ–¥–Ω–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º.

**–° `@JvmOverloads`:**
–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏:

1. `MyView(Context)`
2. `MyView(Context, AttributeSet)`
3. `MyView(Context, AttributeSet, int)`

---

### `@JvmField`: –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è

–í Kotlin `val/var` ‚Äî —ç—Ç–æ —Å–≤–æ–π—Å—Ç–≤–∞ (property). –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø–æ–ª–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ, –∞ –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –≥–µ—Ç—Ç–µ—Ä/—Å–µ—Ç—Ç–µ—Ä.
–ò–Ω–æ–≥–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –∏–ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤) –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ–µ `public` –ø–æ–ª–µ.

```kotlin
class Data {
    @JvmField
    val id = 100 // –í Java —ç—Ç–æ –±—É–¥–µ—Ç: public final int id = 100;
}

```

---

### `@Throws`: –ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

–í Kotlin –Ω–µ—Ç Checked Exceptions. –ù–æ –µ—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –∏–∑ Java, –∏ —Ö–æ—Ç–∏—Ç–µ –∑–∞—Å—Ç–∞–≤–∏—Ç—å Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É (`try-catch`), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@Throws`.

**Kotlin:**

```kotlin
@Throws(IOException::class)
fun readFile() {
    throw IOException("Error")
}

```

**Java:**

```java
try {
    KtFile.readFile();
} catch (IOException e) { // –ë–µ–∑ @Throws –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä Java —Å–∫–∞–∂–µ—Ç, —á—Ç–æ exception –Ω–µ –±—Ä–æ—Å–∞–µ—Ç—Å—è
    // handle
}

```

---

## 3. –ü—Ä–æ–±–ª–µ–º–∞ `final` (Spring & Hibernate)

–≠—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞ Enterprise-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
–í Kotlin **–≤—Å–µ –∫–ª–∞—Å—Å—ã –∏ –º–µ—Ç–æ–¥—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `final**` (–∑–∞–∫—Ä—ã—Ç—ã –¥–ª—è –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è).

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤—Ä–æ–¥–µ **Spring** (–¥–ª—è `@Transactional` –ø—Ä–æ–∫—Å–∏) –∏ **Hibernate** (–¥–ª—è Lazy Loading –ø—Ä–æ–∫—Å–∏) –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤ –≤–∞—à–∏—Ö –∫–ª–∞—Å—Å–æ–≤ –Ω–∞ –ª–µ—Ç—É. –° `final` –∫–ª–∞—Å—Å–∞–º–∏ –æ–Ω–∏ –ø–∞–¥–∞—é—Ç.

**–†–µ—à–µ–Ω–∏–µ 1 (–†—É—á–Ω–æ–µ - –£—Ç–æ–º–∏—Ç–µ–ª—å–Ω–æ):**
–ü–∏—Å–∞—Ç—å `open` –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–ª–∞—Å—Å–æ–º Entity –∏ Service.

```kotlin
open class UserService { ... }
open class UserEntity { ... }

```

**–†–µ—à–µ–Ω–∏–µ 2 (–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ - Compiler Plugins):**
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –≤ Gradle.

1. **Plugin `kotlin-spring` (All-open):** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –∫–ª–∞—Å—Å—ã —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏ Spring (`@Component`, `@Service` –∏ —Ç.–¥.) –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ (`open`). –í—ã –≤ –∫–æ–¥–µ —ç—Ç–æ–≥–æ –Ω–µ –≤–∏–¥–∏—Ç–µ, –Ω–æ –≤ –±–∞–π—Ç-–∫–æ–¥–µ –æ–Ω–∏ –æ—Ç–∫—Ä—ã—Ç—ã.
2. **Plugin `kotlin-jpa` (No-arg):** Hibernate —Ç—Ä–µ–±—É–µ—Ç –ø—É—Å—Ç–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. Data-–∫–ª–∞—Å—Å—ã –µ–≥–æ –Ω–µ –∏–º–µ—é—Ç. –≠—Ç–æ—Ç –ø–ª–∞–≥–∏–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Å—Ç–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è Hibernate.

```kotlin
// build.gradle.kts
plugins {
    kotlin("plugin.spring") version "1.9.0"
    kotlin("plugin.jpa") version "1.9.0"
}

```

---

### üí° –†–µ–∑—é–º–µ –ß–∞—Å—Ç–∏ 1

1. –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Å–ª–æ–∂–Ω–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è ‚Äî –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ `kotlin-reflect`.
2. –ü–∏—à–µ—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è Java? –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `@JvmStatic` –∏ `@JvmOverloads` —â–µ–¥—Ä–æ.
3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Spring/JPA? –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–ª–∞–≥–∏–Ω—ã `all-open` –∏ `no-arg`, –∏–Ω–∞—á–µ —É—Å—Ç–∞–Ω–µ—Ç–µ –ø–∏—Å–∞—Ç—å `open`.

---

# ‚ö´ –£—Ä–æ–≤–µ–Ω—å 5: Expert (–ß–∞—Å—Ç—å 2) ‚Äî Performance & Bytecode

## 1. `inline` —Ñ—É–Ω–∫—Ü–∏–∏: –£–±–∏–π—Ü–∞ –æ–≤–µ—Ä—Ö–µ–¥–∞

–í Kotlin –º—ã –æ–±–æ–∂–∞–µ–º –ª—è–º–±–¥—ã. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö –≤–µ–∑–¥–µ: –≤ `filter`, `map`, `forEach`, –≤ –∫–æ–ª–±—ç–∫–∞—Ö.
–ù–æ –≤ JVM (–¥–æ Project Valhalla) –ª—é–±–∞—è –ª—è–º–±–¥–∞ ‚Äî —ç—Ç–æ **–æ–±—ä–µ–∫—Ç** (—ç–∫–∑–µ–º–ø–ª—è—Ä –∞–Ω–æ–Ω–∏–º–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ `FunctionN`).

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ï—Å–ª–∏ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é —Å –ª—è–º–±–¥–æ–π –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø–æ –ø–∏–∫—Å–µ–ª—è–º), –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ –º–∏–ª–ª–∏–æ–Ω—ã –º—É—Å–æ—Ä–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤. GC (Garbage Collector) —Å–æ–π–¥–µ—Ç —Å —É–º–∞.

**–†–µ—à–µ–Ω–∏–µ:** –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ **`inline`**.

–ï—Å–ª–∏ –≤—ã –ø–æ–º–µ—á–∞–µ—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –∫–∞–∫ `inline`, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Ñ—É–Ω–∫—Ü–∏–∏. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω **–∫–æ–ø–∏—Ä—É–µ—Ç —Ç–µ–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ç–µ–ª–æ –ª—è–º–±–¥—ã –ø—Ä—è–º–æ –≤ –º–µ—Å—Ç–æ –≤—ã–∑–æ–≤–∞**.

### –ü—Ä–∏–º–µ—Ä: –°–≤–æ–π "synchronized"

```kotlin
// –û–±—ã—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (High-order function)
fun lock(lock: Lock, body: () -> Unit) {
    lock.lock()
    try {
        body()
    } finally {
        lock.unlock()
    }
}

// –í –º–µ—Å—Ç–µ –≤—ã–∑–æ–≤–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç new Function() { invoke() { ... } }
lock(l) { doAction() } 

```

–ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å `inline`:

```kotlin
inline fun lock(lock: Lock, body: () -> Unit) {
    lock.lock()
    try {
        body()
    } finally {
        lock.unlock()
    }
}

```

**–í–æ —á—Ç–æ —ç—Ç–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è (Java –ø—Å–µ–≤–¥–æ–∫–æ–¥):**
–ù–∏–∫–∞–∫–∏—Ö –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π. –ö–æ–¥ –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤–∏—Ç—Å—è –≤–Ω—É—Ç—Ä—å:

```java
l.lock();
try {
    doAction(); // –¢–µ–ª–æ –ª—è–º–±–¥—ã –≤—Å—Ç–∞–≤–ª–µ–Ω–æ —Å—é–¥–∞!
} finally {
    l.unlock();
}

```

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `inline`?

1. **–í—Å–µ–≥–¥–∞**, –∫–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—è–º–±–¥—É –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç (–∫–∞–∫ `filter`, `map`, `run`, `let` ‚Äî –æ–Ω–∏ –≤—Å–µ inline).
2. **–ù–∏–∫–æ–≥–¥–∞**, –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –±–æ–ª—å—à–∞—è –∏ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—è–º–±–¥ (–≤—ã –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–¥—É–µ—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞–π—Ç-–∫–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–∞–∫ –∫–∞–∫ –∫–æ–¥ —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤–æ –≤—Å–µ –º–µ—Å—Ç–∞ –≤—ã–∑–æ–≤–∞).

### –¢–æ–Ω–∫–æ—Å—Ç–∏: `noinline` –∏ `crossinline`

* **`noinline`**: –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–∏–Ω–ª–∞–π–Ω–∏—Ç—å –æ–¥–Ω—É –ª—è–º–±–¥—É, –∞ –≤—Ç–æ—Ä—É—é –ø–µ—Ä–µ–¥–∞—Ç—å –∫—É–¥–∞-—Ç–æ –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é (–∏–Ω–ª–∞–π–Ω-–ª—è–º–±–¥—ã –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∫–∞–∫ –æ–±—ä–µ–∫—Ç—ã, –∏—Ö –Ω–µ–ª—å–∑—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–æ–ª–µ).
* **`crossinline`**: –ó–∞–ø—Ä–µ—â–∞–µ—Ç –¥–µ–ª–∞—Ç—å `return` (–≤—ã—Ö–æ–¥ –∏–∑ –≤–Ω–µ—à–Ω–µ–π —Ñ—É–Ω–∫—Ü–∏–∏) –≤–Ω—É—Ç—Ä–∏ –ª—è–º–±–¥—ã, —á—Ç–æ–±—ã –Ω–µ –ø–æ–ª–æ–º–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ—Ç–æ–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

---

## 2. Value Classes (ex. Inline Classes)

–í —Ö–æ—Ä–æ—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –º—ã –ª—é–±–∏–º —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∏–ø—ã-–æ–±–µ—Ä—Ç–∫–∏, —á—Ç–æ–±—ã –Ω–µ –ø—É—Ç–∞—Ç—å –¥–∞–Ω–Ω—ã–µ.
–ù–∞–ø—Ä–∏–º–µ—Ä, `Password` –∏ `Email` ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–∫–∏, –Ω–æ –º—ã –Ω–µ —Ö–æ—Ç–∏–º —Å–ª—É—á–∞–π–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å –≤ –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –∂–¥–µ—Ç email.

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ö–∞–∂–¥–∞—è –æ–±–µ—Ä—Ç–∫–∞ ‚Äî —ç—Ç–æ –ª–∏—à–Ω–∏–π –æ–±—ä–µ–∫—Ç –≤ –∫—É—á–µ (Header + Reference + —Å–∞–º–æ –∑–Ω–∞—á–µ–Ω–∏–µ). –≠—Ç–æ –±—å–µ—Ç –ø–æ –ø–∞–º—è—Ç–∏.

**–†–µ—à–µ–Ω–∏–µ:** **`value class`** (—Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π `@JvmInline`).

```kotlin
@JvmInline
value class Password(val s: String)

@JvmInline
value class UserId(val id: Int)

fun login(uid: UserId, pwd: Password) {
    println("User ${uid.id} logged in")
}

fun main() {
    val uid = UserId(100)
    val pwd = Password("secret")
    
    login(uid, pwd)
}

```

**–ú–∞–≥–∏—è –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º:**
–í Kotlin-–∫–æ–¥–µ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å —Ç–∏–ø–∞–º–∏ `UserId` –∏ `Password`. –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞.
–ù–æ –≤ **–±–∞–π—Ç-–∫–æ–¥–µ** (–≤ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º Java –∫–ª–∞—Å—Å–µ) —ç—Ç–∏ —Ç–∏–ø—ã –∏—Å—á–µ–∑–∞—é—Ç! –ú–µ—Ç–æ–¥ `login` –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```java
// –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ —Å –º–∞–Ω–≥–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º
public static void login_FuncHash(int uid, String pwd) { ... }

```

–ù–∏–∫–∞–∫–∏—Ö –ª–∏—à–Ω–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤. –û–≤–µ—Ä—Ö–µ–¥ ‚Äî –Ω–æ–ª—å.

---

## 3. –•–≤–æ—Å—Ç–æ–≤–∞—è —Ä–µ–∫—É—Ä—Å–∏—è (`tailrec`)

–†–µ–∫—É—Ä—Å–∏—è ‚Äî —ç—Ç–æ –∫—Ä–∞—Å–∏–≤–æ, –Ω–æ –æ–ø–∞—Å–Ω–æ (`StackOverflowError`). –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –º–µ—Å—Ç–æ –≤ —Å—Ç–µ–∫–µ.

–ï—Å–ª–∏ –≤–∞—à –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ—Å—Ç—Ä–æ–µ–Ω —Ç–∞–∫, —á—Ç–æ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ —è–≤–ª—è–µ—Ç—Å—è **–ø–æ—Å–ª–µ–¥–Ω–µ–π** –æ–ø–µ—Ä–∞—Ü–∏–µ–π –≤ —Ñ—É–Ω–∫—Ü–∏–∏, Kotlin –º–æ–∂–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –≤ –æ–±—ã—á–Ω—ã–π —Ü–∏–∫–ª `while`.

```kotlin
// –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª–∞
// tailrec –≥–æ–≤–æ—Ä–∏—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É: "–†–∞–∑–≤–µ—Ä–Ω–∏ —ç—Ç–æ –≤ —Ü–∏–∫–ª, –µ—Å–ª–∏ –º–æ–∂–µ—à—å"
tailrec fun factorial(n: Int, run: Int = 1): Int {
    if (n == 1) return run
    // –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ - –ü–û–°–õ–ï–î–ù–Ø–Ø –æ–ø–µ—Ä–∞—Ü–∏—è.
    // –ú—ã –Ω–µ –¥–µ–ª–∞–µ–º n * factorial(...) ‚Äî —ç—Ç–æ –±—ã–ª–æ –±—ã —É–º–Ω–æ–∂–µ–Ω–∏–µ –ü–û–°–õ–ï –≤—ã–∑–æ–≤–∞.
    return factorial(n - 1, run * n)
}

```

**–ë–∞–π—Ç-–∫–æ–¥ (—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç):**

```java
public int factorial(int n, int run) {
    while (true) {
        if (n == 1) return run;
        run = run * n;
        n = n - 1;
    }
}

```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º—ã –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞ –ø–µ—Ä–µ–ø–æ–ª–Ω–∏—Ç—å —Å—Ç–µ–∫.

---

## 4. Primitive Arrays (–ì–¥–µ —Ç–µ—Ä—è–µ—Ç—Å—è –ø–∞–º—è—Ç—å)

–í Java –µ—Å—Ç—å `int[]` –∏ `Integer[]`.

* `int[]` ‚Äî —ç—Ç–æ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –∫—É—Å–æ–∫ –ø–∞–º—è—Ç–∏ (–æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ, –º–∞–ª–æ –ø–∞–º—è—Ç–∏).
* `Integer[]` ‚Äî —ç—Ç–æ –º–∞—Å—Å–∏–≤ —Å—Å—ã–ª–æ–∫ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã, —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω—ã–µ –ø–æ –∫—É—á–µ (–º–µ–¥–ª–µ–Ω–Ω–æ, –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏).

–í Kotlin:

* **`Array<Int>`** == `Integer[]` (–ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤!). **–ò–∑–±–µ–≥–∞–π—Ç–µ —ç—Ç–æ–≥–æ**, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.
* **`IntArray`** == `int[]` (–ú–∞—Å—Å–∏–≤ –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤). **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ.**

–¢–∞–∫–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç: `BooleanArray`, `ByteArray`, `DoubleArray` –∏ —Ç.–¥.

```kotlin
// –ü–õ–û–•–û (–¥–ª—è high-load):
val boxed: Array<Int> = arrayOf(1, 2, 3) 

// –•–û–†–û–®–û:
val primitives: IntArray = intArrayOf(1, 2, 3)

```

---

## üí° –†–µ–∑—é–º–µ –ß–∞—Å—Ç–∏ 2

1. **`inline`** ‚Äî –≤–∞—à –ª—É—á—à–∏–π –¥—Ä—É–≥ –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —É—Ç–∏–ª–∏—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å –ª—è–º–±–¥–∞–º–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ `Function`.
2. **`value class`** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è DDD (Domain Driven Design), —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ç–∏–ø—ã (`Email`, `Id`) –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ GC.
3. **`tailrec`** ‚Äî –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∫—É—Ä—Å–∏—é –≤ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ü–∏–∫–ª.
4. **`IntArray`** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–º–µ—Å—Ç–æ `Array<Int>`, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å "–≥–æ–ª—ã–º" –∂–µ–ª–µ–∑–æ–º JVM.

---

# ‚ö´ –£—Ä–æ–≤–µ–Ω—å 5: Expert (–ß–∞—Å—Ç—å 3) ‚Äî –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## 1. –ñ–∏–∑–Ω—å –±–µ–∑ Checked Exceptions

–í Java, –µ—Å–ª–∏ –º–µ—Ç–æ–¥ –¥–µ–ª–∞–µ—Ç `throws IOException`, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –±—å–µ—Ç –≤–∞—Å –ø–æ —Ä—É–∫–∞–º, –ø–æ–∫–∞ –≤—ã –Ω–µ –æ–±–µ—Ä–Ω–µ—Ç–µ –≤—ã–∑–æ–≤ –≤ `try-catch`.
–í Kotlin –≤—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è ‚Äî Runtime (–∫–∞–∫ `RuntimeException` –≤ Java).

**–ü–ª—é—Å—ã:**

* –ö–æ–¥ —á–∏—â–µ.
* –õ—è–º–±–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–æ—â–µ (–≤ Java –ª—è–º–±–¥—ã –Ω–µ –º–æ–≥—É—Ç –±—Ä–æ—Å–∞—Ç—å Checked Exceptions –±–µ–∑ "—Ç–∞–Ω—Ü–µ–≤ —Å –±—É–±–Ω–æ–º").

**–ú–∏–Ω—É—Å—ã:**

* –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É, –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–ø–∞–¥–µ—Ç.

–ü–æ—ç—Ç–æ–º—É –≤ Kotlin –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–º —Å—á–∏—Ç–∞–µ—Ç—Å—è **–Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ**, –∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

---

## 2. –¢–∏–ø `Result<T>`

–ù–∞—á–∏–Ω–∞—è —Å Kotlin 1.3, –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –≤—Å—Ç—Ä–æ–µ–Ω –∫–ª–∞—Å—Å `Result<T>`. –≠—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç **–ª–∏–±–æ** —É—Å–ø–µ—à–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `T`, **–ª–∏–±–æ** –∏—Å–∫–ª—é—á–µ–Ω–∏–µ `Throwable`.

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ –∫–∞–∫ –¥–≤–µ –∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–µ –∫–æ–ª–µ–∏: "–£—Å–ø–µ—Ö" –∏ "–ü—Ä–æ–≤–∞–ª". –ö–æ–¥ –¥–≤–∏–∂–µ—Ç—Å—è –ø–æ –Ω–∏–º –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

### –ü—Ä–∏–º–µ—Ä: –ü–∞—Ä—Å–∏–Ω–≥ –∏ –°–µ—Ç—å

```kotlin
// –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (Java style)
fun parseIdOld(input: String): Int {
    return input.toInt() // –ú–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å NumberFormatException
}

// Kotlin Functional Style
// –ú—ã —è–≤–Ω–æ –≥–æ–≤–æ—Ä–∏–º —Å–∏–≥–Ω–∞—Ç—É—Ä–æ–π: "–Ø –≤–µ—Ä–Ω—É Int –∏–ª–∏ –û—à–∏–±–∫—É"
fun parseId(input: String): Result<Int> {
    return try {
        Result.success(input.toInt())
    } catch (e: NumberFormatException) {
        Result.failure(e)
    }
}

```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Result`

–¢–µ–ø–µ—Ä—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ü–µ–ø–æ—á–∫–æ–π –≤—ã–∑–æ–≤–æ–≤, –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—è –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

```kotlin
fun main() {
    val result: Result<Int> = parseId("invalid")

    result
        .onSuccess { id -> 
            println("User ID: $id") 
        }
        .onFailure { e -> 
            println("Parsing failed: ${e.message}") 
        }

    // –ò–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º
    val id = result.getOrDefault(0)
    
    // –ò–ª–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ (map)
    // –ï—Å–ª–∏ –±—ã–ª–∞ –æ—à–∏–±–∫–∞, map –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—Å—è
    val stringResult = result.map { "ID is $it" }
}

```

---

## 3. `runCatching`: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞

–í–∞–º –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å `try-catch` –∏ –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å `Result.success/failure` –∫–∞–∂–¥—ã–π —Ä–∞–∑. –î–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `runCatching`.

–û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –±–ª–æ–∫ –∫–æ–¥–∞, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –µ–≥–æ –∏:

1. –ï—Å–ª–∏ –≤—Å–µ –æ–∫ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Result.success`.
2. –ï—Å–ª–∏ –≤—ã–ª–µ—Ç–µ–ª exception ‚Äî –ª–æ–≤–∏—Ç –µ–≥–æ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Result.failure`.

```kotlin
fun loadData(): Result<Data> = runCatching {
    // –ó–¥–µ—Å—å –æ–ø–∞—Å–Ω—ã–π –∫–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Java –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–ª–∏ —Å–µ—Ç—å)
    apiClient.fetchData() // –ú–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å
}

fun main() {
    loadData()
        .map { it.process() } // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ loadData —É—Å–ø–µ—à–Ω–∞
        .onFailure { sendErrorLog(it) } // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ
        .fold(
            onSuccess = { showData(it) },
            onFailure = { showPlaceholder() }
        )
}

```

**`fold`** ‚Äî —ç—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä. –û–Ω "—Å—Ö–ª–æ–ø—ã–≤–∞–µ—Ç" –¥–≤–µ –≤–µ—Ç–∫–∏ (—É—Å–ø–µ—Ö –∏ –æ—à–∏–±–∫—É) –≤ –æ–¥–Ω–æ –∏—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ. –ê–Ω–∞–ª–æ–≥ `if-else`, –Ω–æ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å—Ç–∏–ª–µ.

---

## 4. `runCatching` –≤–Ω—É—Ç—Ä–∏ –ö–æ—Ä—É—Ç–∏–Ω

–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –≤ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö, —á—Ç–æ–±—ã –Ω–µ "–≤–∞–ª–∏—Ç—å" –≤–µ—Å—å `CoroutineScope` –∏–∑-–∑–∞ –æ–¥–Ω–æ–π –æ—à–∏–±–∫–∏.

```kotlin
viewModelScope.launch {
    // –ï—Å–ª–∏ api.getUser() —É–ø–∞–¥–µ—Ç, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∫—Ä–∞—à–Ω–µ—Ç—Å—è.
    // –ú—ã –ø—Ä–æ—Å—Ç–æ –ø–æ–ª—É—á–∏–º –æ–±—ä–µ–∫—Ç Result —Å –æ—à–∏–±–∫–æ–π –≤–Ω—É—Ç—Ä–∏.
    val result = runCatching { api.getUser() }
    
    result.onSuccess { user ->
        _uiState.value = UiState.Content(user)
    }
    result.onFailure { e ->
        _uiState.value = UiState.Error(e.message)
    }
}

```

---

## 5. –î–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö –≥—É—Ä—É: –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Arrow

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `Result<T>` –∏–º–µ–µ—Ç –æ–¥–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: –æ—à–∏–±–∫–∞ –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–º `Throwable`.
–ù–æ —á—Ç–æ, –µ—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Äî —ç—Ç–æ –Ω–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –∞ –ø—Ä–æ—Å—Ç–æ –¥–æ–º–µ–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `UserNotFound`, `NotEnoughMoney`)? –í—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ ‚Äî –¥–æ—Ä–æ–≥–æ (–∏–∑-–∑–∞ StackTrace) –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.

–ó–¥–µ—Å—å –Ω–∞ —Å—Ü–µ–Ω—É –≤—ã—Ö–æ–¥—è—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–∞–º–∞—è –ø–æ–ø—É–ª—è—Ä–Ω–∞—è ‚Äî **Arrow**.
–¢–∏–ø **`Either<Left, Right>`**:

* **Right (–ü—Ä–∞–≤–æ):** –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–£—Å–ø–µ—Ö).
* **Left (–õ–µ–≤–æ):** –û—à–∏–±–∫–∞ (–õ—é–±–æ–π –æ–±—ä–µ–∫—Ç, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ Exception).

```kotlin
// (–ü—Ä–∏–º–µ—Ä —Å Arrow, –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ stdlib)
fun buyItem(price: Int): Either<BuyError, Item> {
    if (balance < price) return Either.Left(BuyError.NotEnoughMoney)
    return Either.Right(Item("Sword"))
}

```

*–≠—Ç–æ —É–∂–µ —É—Ä–æ–≤–µ–Ω—å Senior+, –Ω–æ –∑–Ω–∞—Ç—å –æ–± —ç—Ç–æ–º –Ω—É–∂–Ω–æ.*

---

## üí° –†–µ–∑—é–º–µ –£—Ä–æ–≤–Ω—è 5

1. **Reflection:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `::class` (KClass) –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `kotlin-reflect` –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
2. **Interop:** –£–≤–∞–∂–∞–π—Ç–µ Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤. –°—Ç–∞–≤—å—Ç–µ `@JvmStatic`, `@JvmOverloads` –∏ `@Throws`.
3. **Performance:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `inline` –¥–ª—è –ª—è–º–±–¥, `value class` –¥–ª—è –æ–±–µ—Ä—Ç–æ–∫ –∏ `IntArray` –¥–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤.
4. **Errors:** –ó–∞–±—É–¥—å—Ç–µ –ø—Ä–æ `try-catch` –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `runCatching` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ `Result<T>`.

---

# üõ†Ô∏è –£—Ä–æ–≤–µ–Ω—å 6: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –ú–∞–≥–∏—è (DSL)

## 1. –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç: Lambda with Receiver

–í—Å–ø–æ–º–Ω–∏–º –æ–±—ã—á–Ω—É—é –ª—è–º–±–¥—É. –û–Ω–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç.

```kotlin
val printIt: (String) -> Unit = { println(it) } // it - —ç—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç
printIt("Hello")

```

–ê —Ç–µ–ø–µ—Ä—å –º–∞–≥–∏—è. –ú—ã –º–æ–∂–µ–º —Å–∫–∞–∑–∞—Ç—å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É: **"–°—á–∏—Ç–∞–π, —á—Ç–æ —ç—Ç–∞ –ª—è–º–±–¥–∞ ‚Äî —ç—Ç–æ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Å–∞ String"**.
–≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **Lambda with Receiver** (–õ—è–º–±–¥–∞ —Å –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º).
–¢–∏–ø –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Ç–∞–∫: `String.() -> Unit`.

```kotlin
// –¢–∏–ø: String.() -> Unit
// –í–Ω—É—Ç—Ä–∏ –ª—è–º–±–¥—ã "this" ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞, –∫ –∫–æ—Ç–æ—Ä–æ–π –º—ã –µ—ë –ø—Ä–∏–º–µ–Ω–∏–ª–∏!
val printThis: String.() -> Unit = { 
    // –ú—ã –≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏! –ú–æ–∂–µ–º –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã String –Ω–∞–ø—Ä—è–º—É—é.
    println(this.uppercase()) 
    // –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ
    println(length) 
}

fun main() {
    val str = "hello"
    // –í—ã–∑—ã–≤–∞–µ–º –ª—è–º–±–¥—É —Ç–∞–∫, –±—É–¥—Ç–æ —ç—Ç–æ –º–µ—Ç–æ–¥ –æ–±—ä–µ–∫—Ç–∞ str
    str.printThis() 
}

```

–ò–º–µ–Ω–Ω–æ —ç—Ç–∞ —Ñ–∏—á–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ `{ ... }` –∏ –ø–∏—Å–∞—Ç—å –∫–æ–¥ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, —Å–æ–∑–¥–∞–≤–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å.

---

## 2. –ü—Ä–æ–µ–∫—Ç: –ü–∏—à–µ–º —Å–≤–æ–π HTML Builder

–ú—ã —Ö–æ—Ç–∏–º –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç HTML, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º:

```kotlin
val text = html {
    head { title("My Site") }
    body {
        h1("Hello")
        p("Kotlin is power")
    }
}

```

### –®–∞–≥ 1: –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å

–ù–∞–º –Ω—É–∂–µ–Ω –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∏–º—è —Ç–µ–≥–∞, –∞—Ç—Ä–∏–±—É—Ç—ã –∏ —Å–ø–∏—Å–æ–∫ –¥–µ—Ç–µ–π.

```kotlin
abstract class Tag(val name: String) {
    private val children = mutableListOf<Tag>()
    private val content = StringBuilder()

    // –ú–∞–≥–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
    // <T : Tag> - —Å–æ–∑–¥–∞–µ–º —Ç–µ–≥ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
    // init: T.() -> Unit - –ª—è–º–±–¥–∞ —Å –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–º —ç—Ç–æ–≥–æ —Ç–µ–≥–∞
    protected fun <T : Tag> initTag(tag: T, init: T.() -> Unit): T {
        tag.init() // –í—ã–ø–æ–ª–Ω—è–µ–º –ª—è–º–±–¥—É –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω–æ–≤–æ–≥–æ —Ç–µ–≥–∞
        children.add(tag) // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫ –¥–µ—Ç–µ–π
        return tag
    }

    // –ú–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
    fun text(s: String) {
        content.append(s)
    }

    // –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä –≤ —Å—Ç—Ä–æ–∫—É
    override fun toString(): String {
        val builder = StringBuilder()
        builder.append("<$name>")
        if (content.isNotEmpty()) builder.append(content)
        for (c in children) builder.append(c.toString())
        builder.append("</$name>")
        return builder.toString()
    }
}

```

### –®–∞–≥ 2: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–µ–≥–∏

–û–ø–∏—Å—ã–≤–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML.

```kotlin
class HTML : Tag("html") {
    // –í–Ω—É—Ç—Ä–∏ HTML –º–æ–∂–µ—Ç –±—ã—Ç—å HEAD –∏ BODY
    fun head(init: Head.() -> Unit) = initTag(Head(), init)
    fun body(init: Body.() -> Unit) = initTag(Body(), init)
}

class Head : Tag("head") {
    fun title(text: String) = initTag(Title(), { text(text) })
}

class Title : Tag("title")

class Body : Tag("body") {
    // –í–Ω—É—Ç—Ä–∏ BODY –º–æ–≥—É—Ç –±—ã—Ç—å H1, P, A...
    fun h1(text: String) = initTag(H1(), { text(text) })
    fun p(text: String) = initTag(P(), { text(text) })
}

class H1 : Tag("h1")
class P : Tag("p")

```

### –®–∞–≥ 3: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞

```kotlin
fun html(init: HTML.() -> Unit): String {
    val root = HTML() // –°–æ–∑–¥–∞–µ–º –∫–æ—Ä–Ω–µ–≤–æ–π –æ–±—ä–µ–∫—Ç
    root.init()       // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫ –Ω–µ–º—É –ª—è–º–±–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    return root.toString() // –†–µ–Ω–¥–µ—Ä–∏–º
}

```

–¢–µ–ø–µ—Ä—å –≤–∞—à –∫–æ–¥ –∏–∑ –Ω–∞—á–∞–ª–∞ –ø—Ä–∏–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç! –ò —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ: –≤–Ω—É—Ç—Ä–∏ `head` –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å `h1`, –µ—Å–ª–∏ –Ω–µ –¥–æ–±–∞–≤–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ –≤ –∫–ª–∞—Å—Å `Head`. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–ª–µ–¥–∏—Ç –∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

---

## 3. –ü—Ä–æ–µ–∫—Ç: SQL Builder (Fluent Interface)

–ó–¥–µ—Å—å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **Infix functions**, —á—Ç–æ–±—ã –∫–æ–¥ —á–∏—Ç–∞–ª—Å—è –∫–∞–∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ.

–¶–µ–ª—å:

```kotlin
val sql = select("name", "age") from "users" where { "age" eq 18 }

```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

```kotlin
class SqlQuery {
    private val columns = mutableListOf<String>()
    private var table: String = ""
    private var condition: String = ""

    // 1. SELECT
    fun select(vararg cols: String): SqlQuery {
        columns.addAll(cols)
        return this // –í–æ–∑–≤—Ä–∞—â–∞–µ–º this –¥–ª—è —Ü–µ–ø–æ—á–∫–∏
    }

    // 2. FROM (Infix!)
    infix fun from(tableName: String): SqlQuery {
        table = tableName
        return this
    }

    // 3. WHERE (–ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—è–º–±–¥—É —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º Condition)
    infix fun where(block: Condition.() -> Unit): SqlQuery {
        val cond = Condition()
        cond.block()
        condition = cond.toString()
        return this
    }

    override fun toString(): String {
        return "SELECT ${columns.joinToString(", ")} FROM $table WHERE $condition"
    }
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —É—Å–ª–æ–≤–∏–π
class Condition {
    private val parts = mutableListOf<String>()

    // infix —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è: "age" eq 18
    infix fun String.eq(value: Any) {
        // –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ - –¥–æ–±–∞–≤–ª—è–µ–º –∫–∞–≤—ã—á–∫–∏
        val v = if (value is String) "'$value'" else value
        parts.add("$this = $v")
    }
    
    infix fun String.like(value: String) {
        parts.add("$this LIKE '$value'")
    }

    override fun toString() = parts.joinToString(" AND ")
}

// –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (—á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å new SqlQuery)
fun select(vararg columns: String) = SqlQuery().select(*columns)

```

–í—É–∞–ª—è! –í—ã –Ω–∞–ø–∏—Å–∞–ª–∏ –º–∏–Ω–∏-ORM –∑–∞ 30 —Å—Ç—Ä–æ–∫.

---

## 4. –ü—Ä–æ–µ–∫—Ç: JSON DSL –∏ Sealed Classes

–ò –Ω–∞–ø–æ—Å–ª–µ–¥–æ–∫, –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å JSON —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –ó–¥–µ—Å—å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **–æ–ø–µ—Ä–∞—Ç–æ—Ä `UnaryPlus` (`+`)** –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã —ç—Ç–æ –≤—ã–≥–ª—è–¥–µ–ª–æ –Ω–µ–æ–±—ã—á–Ω–æ –∏ —Å—Ç–∏–ª—å–Ω–æ.

–¶–µ–ª—å:

```kotlin
val myJson = json {
    "name" to "Kotlin"
    "versions" to array(1.0, 1.1, 1.4)
    "meta" to obj {
        "author" to "JetBrains"
    }
}

```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

```kotlin
class JsonObject {
    private val map = mutableMapOf<String, Any>()

    // infix —Ñ—É–Ω–∫—Ü–∏—è "key" to "value"
    infix fun String.to(value: Any) {
        map[this] = value
    }

    // –ú–µ—Ç–æ–¥ –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
    fun obj(init: JsonObject.() -> Unit): JsonObject {
        val nested = JsonObject()
        nested.init()
        return nested
    }
    
    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –¥–ª—è –º–∞—Å—Å–∏–≤–∞
    fun array(vararg args: Any) = args.toList()

    override fun toString(): String {
         // –ü—Ä–æ—Å—Ç–∞—è, –Ω–∞–∏–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        val pairs = map.map { (k, v) -> 
            val valueStr = if (v is String) "\"$v\"" else v.toString()
            "\"$k\": $valueStr" 
        }
        return "{ ${pairs.joinToString(", ")} }"
    }
}

fun json(init: JsonObject.() -> Unit): String {
    val root = JsonObject()
    root.init()
    return root.toString()
}

```

---

# üí° –†–µ–∑—é–º–µ —É—Ä–æ–≤–Ω—è 6

–í—ã –ø—Ä–æ—à–ª–∏ –ø—É—Ç—å –æ—Ç –Ω–æ–≤–∏—á–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–∏—à–µ—Ç `public static void`, –¥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç:

1. –£–ø—Ä–∞–≤–ª—è—Ç—å —Ç—ã—Å—è—á–∞–º–∏ –ø–æ—Ç–æ–∫–æ–≤ —á–µ—Ä–µ–∑ **Coroutines**.
2. –°—Ç—Ä–æ–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –Ω–∞ **Sealed Classes**.
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞–º—è—Ç—å —á–µ—Ä–µ–∑ **Inline & Value Classes**.
4. –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ —è–∑—ã–∫–∏ —Ä–∞–∑–º–µ—Ç–∫–∏ —á–µ—Ä–µ–∑ **DSL**

---

# üß™ –£—Ä–æ–≤–µ–Ω—å 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ-–ö–æ—Ç–ª–∏–Ω–æ–≤—Å–∫–∏ (Mockk & Coroutines)

*–¶–µ–ª—å: –ù–∞—É—á–∏—Ç—å—Å—è –ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–æ–∫–∞—Ç—å final-–∫–ª–∞—Å—Å—ã –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥.*

## 1. –ò–º–µ–Ω–∞ –º–µ—Ç–æ–¥–æ–≤ –≤ –æ–±—Ä–∞—Ç–Ω—ã—Ö –∫–∞–≤—ã—á–∫–∞—Ö

–í Java –º—ã –ø–∏—Å–∞–ª–∏: `shouldReturnTrue_whenUserIsValid()`.
–í Kotlin –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö —Ñ—É–Ω–∫—Ü–∏–π, –µ—Å–ª–∏ –∑–∞–∫–ª—é—á–∏–º –∏—Ö –≤ –æ–±—Ä–∞—Ç–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ ```.

```kotlin
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.Assertions.assertEquals

class MathTest {

    @Test
    fun `should return sum when adding two positive numbers`() {
        val result = 2 + 2
        assertEquals(4, result)
    }
    
    @Test
    fun `—Å–ø–∏—Å–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏`() { // –î–∞, –º–æ–∂–Ω–æ –¥–∞–∂–µ –ø–æ-—Ä—É—Å—Å–∫–∏
        val list = emptyList<String>()
        assertEquals(0, list.size)
    }
}

```

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ JVM, –Ω–æ –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å —Å–±–æ–∏ –Ω–∞ Android API < 30 (—Ç–∞–º –ª—É—á—à–µ –ø–æ —Å—Ç–∞—Ä–∏–Ω–∫–µ).*

---

## 2. Mockito vs Mockk

–ü–æ—á–µ–º—É Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—Ç–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –æ—Ç Mockito –≤ Kotlin?

1. **`when`** ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –≤ Kotlin. –í Mockito –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø–∏—Å–∞—Ç—å `Mockito.`when`(mock.method())`. –£–∂–∞—Å–Ω–æ.
2. **Final –∫–ª–∞—Å—Å—ã:** –í Kotlin –≤—Å–µ –∫–ª–∞—Å—Å—ã `final`. Mockito –Ω–µ —É–º–µ–µ—Ç –∏—Ö –º–æ–∫–∞—Ç—å –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `mock-maker-inline`.
3. **Null Safety:** `Mockito.any()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`. –ï—Å–ª–∏ –≤–∞—à –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `String` (–Ω–µ `String?`), Mockito –∫–∏–Ω–µ—Ç NPE –µ—â–µ –¥–æ –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∞.

–í—Å—Ç—Ä–µ—á–∞–π—Ç–µ **Mockk** ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –Ω–∞–ø–∏—Å–∞–Ω–Ω—É—é –Ω–∞ Kotlin –¥–ª—è Kotlin.

### –û—Å–Ω–æ–≤—ã Mockk DSL

```kotlin
// –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: io.mockk:mockk:1.13.x

class UserServiceTest {
    // –°–æ–∑–¥–∞–µ–º –º–æ–∫ (–∞–Ω–∞–ª–æ–≥ @Mock)
    // relaxed = true –∑–Ω–∞—á–∏—Ç "–≤–æ–∑–≤—Ä–∞—â–∞–π –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –µ—Å–ª–∏ —è –Ω–µ –∑–∞–¥–∞–ª –ø–æ–≤–µ–¥–µ–Ω–∏–µ"
    private val userRepository = mockk<UserRepository>(relaxed = true)
    
    private val userService = UserService(userRepository)

    @Test
    fun `should register user when email is unique`() {
        // GIVEN (–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è)
        // –ê–Ω–∞–ª–æ–≥: when(repo.exists("email")).thenReturn(false)
        every { userRepository.exists("alex@mail.com") } returns false
        
        // Slot - —á—Ç–æ–±—ã –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç (ArgumentCaptor)
        val userSlot = slot<User>()
        // just Runs - –¥–ª—è –º–µ—Ç–æ–¥–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏—Ö Unit (void)
        every { userRepository.save(capture(userSlot)) } just Runs 

        // WHEN
        userService.register("alex@mail.com")

        // THEN (–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∑–æ–≤–æ–≤)
        // –ê–Ω–∞–ª–æ–≥: verify(repo).save(any())
        verify(exactly = 1) { userRepository.save(any()) }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—Ö–≤–∞—á–µ–Ω–Ω–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞
        assertEquals("alex@mail.com", userSlot.captured.email)
    }
}

```

### –ú–æ–∫–∏–Ω–≥ `object` –∏ Static (–ú–∞–≥–∏—è)

Mockito —ç—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–æ —Å–∫—Ä–∏–ø–æ–º. Mockk –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É.

```kotlin
// –£ –Ω–∞—Å –µ—Å—Ç—å —Å–∏–Ω–≥–ª—Ç–æ–Ω
object Calculator {
    fun complexOp(x: Int) = x * 100
}

@Test
fun `test object mocking`() {
    // –ú–æ–∫–∞–µ–º –æ–±—ä–µ–∫—Ç
    mockkObject(Calculator)
    
    every { Calculator.complexOp(5) } returns 999
    
    assertEquals(999, Calculator.complexOp(5))
    
    // –ù–µ –∑–∞–±—ã–≤–∞–µ–º —Ä–∞–∑–º–æ–∫–∞—Ç—å –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞!
    unmockkObject(Calculator) 
}

```

---

## 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ö–æ—Ä—É—Ç–∏–Ω (`runTest`)

–ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `suspend` —Ñ—É–Ω–∫—Ü–∏—é, –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å `delay(10000)`? –ñ–¥–∞—Ç—å 10 —Å–µ–∫—É–Ω–¥? –ù–µ—Ç.
–ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É `kotlinx-coroutines-test`.

### `runTest` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º

–≠—Ç–æ—Ç –±–∏–ª–¥–µ—Ä –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ `delay`. 10 —Å–µ–∫—É–Ω–¥ –ø—Ä–æ–π–¥—É—Ç –∑–∞ 1 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

```kotlin
// –ö–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
class DataFetcher {
    suspend fun fetchData(): String {
        delay(5000) // –î–æ–ª–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
        return "Data"
    }
}

@Test
fun `should fetch data instantly`() = runTest {
    // –í–Ω—É—Ç—Ä–∏ runTest –º—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ StandardTestDispatcher
    val fetcher = DataFetcher()
    
    val result = fetcher.fetchData() // delay(5000) –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
    
    assertEquals("Data", result)
    // currentTime –ø–æ–∫–∞–∂–µ—Ç, —á—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ –ø—Ä–æ—à–ª–æ 5000–º—Å
    assertEquals(5000, currentTime) 
}

```

### –ü–æ–¥–º–µ–Ω–∞ Dispatchers (Injecting Dispatchers)

–í —Ä–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `withContext(Dispatchers.IO)`. –í —Ç–µ—Å—Ç–∞—Ö `Dispatchers.IO` –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∏—Å–ø–µ—Ç—á–µ—Ä, –∏–Ω–∞—á–µ —Ç–µ—Å—Ç—ã –±—É–¥—É—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã.

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω:** –í–Ω–µ–¥—Ä—è—Ç—å –¥–∏—Å–ø–µ—Ç—á–µ—Ä—ã —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä.

```kotlin
// Prod –∫–æ–¥
class Repository(
    private val ioDispatcher: CoroutineDispatcher = Dispatchers.IO // –ü–æ –¥–µ—Ñ–æ–ª—Ç—É IO
) {
    suspend fun save() = withContext(ioDispatcher) { /* ... */ }
}

// Test –∫–æ–¥
@Test
fun `test repository`() = runTest {
    // –ü–æ–¥—Å–æ–≤—ã–≤–∞–µ–º UnconfinedTestDispatcher (–≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å—ë —Å—Ä–∞–∑—É –Ω–∞ —Ç–µ–∫—É—â–µ–º –ø–æ—Ç–æ–∫–µ)
    val repo = Repository(ioDispatcher = UnconfinedTestDispatcher())
    repo.save()
}

```

---

## 4. Data Driven Testing (–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã)

–í JUnit 5 –µ—Å—Ç—å `@ParameterizedTest`. –ù–æ –≤ Kotlin –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—â–µ –∏ –Ω–∞–≥–ª—è–¥–Ω–µ–µ —Å –ø–æ–º–æ—â—å—é —Å–ø–∏—Å–∫–æ–≤ –∏ –ª—è–º–±–¥.

```kotlin
@Test
fun `validator should accept valid emails`() {
    // –°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    listOf(
        "simple@example.com",
        "very.common@example.com",
        "disposable.style.email+symbol@example.com"
    ).forEach { email ->
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π email
        assertTrue(Validator.isValid(email), "Failed for: $email")
    }
}

```

–î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–≤—Ö–æ–¥ -> –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ data classes:

```kotlin
@Test
fun `calculator should sum correctly`() {
    data class TestCase(val a: Int, val b: Int, val expected: Int)
    
    listOf(
        TestCase(1, 1, 2),
        TestCase(2, 3, 5),
        TestCase(-1, 1, 0)
    ).forEach { (a, b, expected) ->
        assertEquals(expected, a + b)
    }
}

```

---

## 5. Kotest (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –≤—Å–µ–ª–µ–Ω–Ω–∞—è)

–°—Ç–æ–∏—Ç —É–ø–æ–º—è–Ω—É—Ç—å, —á—Ç–æ –≤ Kotlin –µ—Å—Ç—å –º–æ—â–Ω–µ–π—à–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ **Kotest**. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã —Å–æ–≤—Å–µ–º –Ω–µ —Ç–∞–∫, –∫–∞–∫ –≤ JUnit.

```kotlin
// –°—Ç–∏–ª—å StringSpec (–æ–¥–∏–Ω –∏–∑ 10 —Å—Ç–∏–ª–µ–π Kotest)
class MyTests : StringSpec({
    
    "length of Hello should be 5" {
        "Hello".length shouldBe 5
    }
    
    "collections check" {
        val list = listOf("a", "b", "c")
        list shouldContain "b"
        list shouldHaveSize 3
    }
})

```

*–°–æ–≤–µ—Ç: –ù–∞—á–Ω–∏—Ç–µ —Å JUnit 5 + Mockk. –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∏–Ω–¥—É—Å—Ç—Ä–∏–∏. Kotest ‚Äî —ç—Ç–æ –≤—ã–±–æ—Ä –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ DSL.*

---

### üí° –†–µ–∑—é–º–µ –£—Ä–æ–≤–Ω—è 7

1. **–ò–º–µ–Ω–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ``backticks with spaces`` –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.
2. **Mockk:** –ó–∞–±—É–¥—å—Ç–µ Mockito. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `mockk()`, `every { }` –∏ `verify { }`.
3. **Coroutines:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `runTest` –∏ `StandardTestDispatcher` –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ –≤—Ä–µ–º–µ–Ω–∏.
4. **Architecture:** –í—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ `Dispatcher` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–ª–∞—Å—Å–æ–≤, —á—Ç–æ–±—ã –≤ —Ç–µ—Å—Ç–∞—Ö –µ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å.

–¢–µ–ø–µ—Ä—å –≤–∞—à roadmap –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª–æ–Ω. –í—ã —É–º–µ–µ—Ç–µ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–∏—Å–∞—Ç—å –∫–æ–¥, –Ω–æ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏.